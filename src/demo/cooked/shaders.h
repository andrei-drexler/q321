#pragma once
// auto-generated, do not modify (see cook_shader.js)

// trim_newlines       : true
// consistent_floats   : false
// rename_ids          : true
// rename_vec_fields   : true
// rename_globals      : true
// min_macro_savings   : 8

// src/demo/data/shaders/fragment_shaders.glsl: 31451 => 14259 (45.3%)
const char g_fragment_shaders[] =
"#define j vec2\n"
"#define y float\n"
"#define z vec3\n"
"#define A return\n"
"#define B mix\n"
"#define I vec4\n"
"#define J fract\n"
"#define K length\n"
"#define M abs\n"
"#define O max\n"
"#define P min\n"
"#define Q UV\n"
"#define T rgb\n"
"#define U FCol\n"
"#define W void\n"
"#define aa Time\n"
"#define ag Texture0\n"
"#define ah texture\n"
"#define a0 floor\n"
"#define a8 normalize\n"
"uniform I aa,Cam;uniform sampler2D ag,Texture1;in z Pos,Nor,Ref;in j Q,LUV;in I Clr;out I U;\n"
"#define aY(x)((x)*(x)*(3.-2.*(x)))\n"
"#define S(x)(x)*(x)\n"
"#define aZ(x)dot(x,x)\n"
"#define af(x)clamp(x,0.,1.)\n"
"#define C(r,g,b)(z(r,g,b)/255.)\n"
"y az=3.1415927,bz=2.*az,a5=1.618034;j ba(y i){y G=1.324718;A J(.5+i/j(G,G*G));}y bc(y i){A J(.5+i*a5);}y a6(j v){A P(v.r,v.g);}y a6(z v){A P(v.r,P(v.g,v.b));}y a6(I v){A P(P(v.r,v.g),P(v.b,v.a));}y ar(j v){A O(v.r,v.g);}y ar(z v){A O(v.r,O(v.g,v.b));}y ar(I v){A O(O(v.r,v.g),O(v.b,v.a));}y a9(j v){A v.r+v.g;}y E(y bd,y be,y x){A 1.-af(M(x-bd)/be);}y D(y aE,y bf,y x){A af((x-aE)/(bf-aE));}j X(y x){A j(sin(x),cos(x));}mat2 aA(y x){j v=X(radians(x));A mat2(v.g,v.r,-v.r,v.g);}j ao(j w,y p,y s){A w+sin(w.gr*az*p)*s;}j ao(j w,y t,y p,y s){A w+sin(w.gr*az*p+t)*s;}j bh(j w,j s){w.r+=a0(w.g*s.g)*(.5/s.r);A J(w)*s;}z a1(j w,y r){A z(w-=clamp(w,r,1.-r),K(w)/r);}z a1(j w,j s,y r){s=s.gr/a6(s);w*=s;A z(w-=clamp(w,j(r),s-r),K(w)/r);}y H(j p){z q=J(p.rgr*.09153);q+=dot(q,q.gbr+19.19);A J((q.r+q.g)*q.b);}y H(y p){p=J(p*.1031);p*=p+33.33;p*=p+p;A J(p);}z b0(y p){z ad=J(z(p)*z(.1031,.1030,.0973));ad+=dot(ad,ad.gbr+33.33);A J((ad.rrg+ad.gbb)*ad.bgr);}j bi(j p){z ad=J(z(p.rgr)*z(.1031,.1030,.0973));ad+=dot(ad,ad.gbr+33.33);A J((ad.rr+ad.gb)*ad.bg);}I b1(y p){I as=J(I(p)*I(.1031,.1030,.0973,.1099));as+=dot(as,as.abrg+33.33);A J((as.rrgb+as.gbba)*as.bgar);}y Y(y x,y p){A H(mod(x,p));}y N(y x){y i;A B(H(i=a0(x)),H(i+1.),aY(x-i));}y V(y x,y p){y i;A B(Y(i=a0(x),p),Y(i+1.,p),x-i);}y Y(j p,j s){A H(mod(p,s));}y V(j p,j s){p*=s;j i=a0(p);p-=i;p*=p*(3.-2.*p);y bj=Y(i+j(0,0),s);y bk=Y(i+j(0,1),s);y bl=Y(i+j(1,1),s);y bm=Y(i+j(1,0),s);A B(B(bj,bm,p.r),B(bk,bl,p.r),p.g);}y F(j p,j aj,y a2,y a3,int aB){y a4=V(p,aj),aq=1.,tw=1.;for(int i=0;i<aB;++i){p=J(p+a5);aj*=a3;aq*=a2;a4+=V(p,aj)*aq;tw+=aq;}A a4/tw;}y F(j p,j aj,y a2,y a3){A F(p,aj,a2,a3,4);}\n"
"#define at(v)E(.5,.5,v)\n"
"y aF(j p,j aj,y a2,y a3,int aB){y a4=at(V(p,aj)),aq=1.,tw=1.;for(int i=0;i<aB;++i){p=J(p+a5);aj*=a3;aq*=a2;a4+=at(V(p,aj))*aq;tw+=aq;}A a4/tw;}j a7(j p,j a,j b){j ab=b-a,ap=p-a;y t=af(dot(ap,ab)/dot(ab,ab));A ab*t+a;}y R(j p,j b){j d=M(p)-b;A P(O(d.r,d.g),0.)+K(O(d,0.));}y aC(j p,j b){A ar(M(p)-b);}y aG(j p,y r){A K(p)-r;}y aH(j p,j r){A(K(p/r)-1.)/P(r.r,r.g);}y bn(y a,y b,y k){y h=af(.5+0.5*(b-a)/k);A B(b,a,h)-k*h*(1.-h);}j aI(y x){j d=j(dFdx(x),dFdy(x));A d/O(K(d),1e-8);}y ac(y s,y d){A af(1.-s/d);}y ac(y s){A af(1.-s/fwidth(s));}j bo(j v,y m){A j(m-M(v.r-m),v.g);}z aJ(j p,y X,y bp){z e=z(-1,0,1),r=z(1e5);j ae=a0(p*X),b2=e.gg;p-=(ae+.5)/X;y Z=.5*Y(ae+e.gg,j(X));y au=.5*Y(ae+e.rg,j(X));y av=.5*Y(ae+e.gb,j(X));y aw=.5*Y(ae+e.bg,j(X));y ay=.5*Y(ae+e.gr,j(X));y aK=.5*Y(ae+e.rb,j(X));y aL=.5*Y(ae+e.bb,j(X));y aM=.5*Y(ae+e.br,j(X));y aN=.5*Y(ae+e.rr,j(X));j[4]ai,l;if(mod((ae.r+ae.g),2.)<.5){l[0]=1.+j(av-au,aK-Z);l[1]=1.+j(-av+aw,aL-Z);l[2]=1.+j(-ay+aw,-aM+Z);l[3]=1.+j(ay-au,-aN+Z);ai[0]=j(av,Z)+l[0]*j(-.5,.5);ai[1]=j(av,Z)+l[1]*j(.5,.5);ai[2]=j(ay,Z)+l[2]*j(.5,-.5);ai[3]=j(ay,Z)+l[3]*j(-.5,-.5);}else{l[0]=1.+j(-aK+Z,av-au);l[1]=1.+j(aL-Z,av-aw);l[2]=1.+j(aM-Z,-ay+aw);l[3]=1.+j(-aN+Z,-ay+au);ai[0]=j(Z,au)+l[0]*j(-.5,.5);ai[1]=j(Z,aw)+l[1]*j(.5,.5);ai[2]=j(Z,aw)+l[2]*j(.5,-.5);ai[3]=j(Z,au)+l[3]*j(-.5,-.5);}for(int i=0;i<4;i++){l[i]/=X;y bx=aC(p-ai[i]/X,l[i]/2.-bp/X);if(bx<r.r)r=z(bx,ae+ai[i]);}A r;}j aO(j p,j aP){p*=aP;j n=a0(p),f=p-n,aQ,g,o,r;y aR=8.0,d;for(int i=0;i<9;++i){g=j(i%3-1,i/3-1);o=bi(mod(n+g,aP));r=g+o-f;d=a9(M(r));if(d<aR){aR=d;aQ=r;}}A aQ;}y aS(z p){p=a8(p);z a=mod(degrees(atan(p,p.gbr)),360.);A V(a.r/8.,45.)*D(.9,.0,M(p.b))+V(a.g/8.,45.)*D(.7,.0,M(p.r));}j aT(z p,int ax){A(ax==0)?p.gb:(ax==1)?p.rb:p.rg;}int aU(z n){n=M(n)+z(.01,.02,.03);y m=ar(n);A(m==n.r)?0:(m==n.g)?1:2;}z bq(z c){z T=af(M(mod(c.r*6.+z(0,4,2),6.)-3.)-1.);T*=T*(3.-2.*T);A c.b*B(z(1.),T,c.g);}z ak(){z d=Cam.T-Pos;y b=F(d.rg/256.*aA(Cam.a),j(3),.7,3.,4),l=1.-D(14.,-6.,K(d.rg)-b*8.)*D(128.,48.,d.b)*step(.1,Nor.b);A ah(Texture1,LUV).T*3.*l;}\n"
"#define L(al)z al(j);W al(){U=I(al(Q),1);}z al(j w)\n"
"#define an(al)I al(j);W al(){U=al(Q);}I al(j w)\n"
"L(cmet52){y b=F(w,j(5),.9,3.,4);z c=B(C(48,41,33),C(103,101,104),b);A c;}L(ptrshn){y b=F(w,j(3),.9,3.,4);z c=B(C(49,45,43),C(81,75,78),b*b);A c;}L(dmnd2c){y b=F(w,j(7),.9,3.);w.r*=-1.5;w.g+=w.r*.5;w.r=1.-w.r+w.g;w=J(w*28.);y f=af(1.-K(.1-w));f*=D(.6,.2,K(.6-w));f*=D(.6,.8,K(.1-w));f*=D(.2,.6,b)*2.+1.;y l=1.-D(.2,b+2.,ar(M(w-.5)));A z((f+1.)*B(.21,.29,b*b)*l);}L(dmnd2cow){y b=F(w,j(7),.9,3.);z c=dmnd2c(w);y r=K(w-.5);c=B(c,c*C(70,61,53),D(.5,.2,r+b*b*b));A c;}an(dmnd2pnt){z c=dmnd2cow(w);w=J(w)-.5;y b=F(w,j(3),.9,3.),d=M(K(w)-.4),i=0.;for(;i<5.;++i){j p=j(0,-.35)*aA(i*72.);d=P(d,K(w-a7(w,p,p*aA(144.))));}A I(c,ac(d-.02+b*.02,.01));}W dmnd2pnt_m(){I c=ah(ag,Q);U=I(c.T*ak()+C(111,55,0)*c.a*(sin(aa.r*az)*.5+.5),1);}L(dmnd2cjp){y b=F(w,j(7),.9,3.,4);z c=dmnd2c(w);y r=K(w-.5);y m=D(.46,.45,r);y l=1.5-1.5*D(.0,.3,r*r);l=B(l,2.5,E(.42,.07,r));l=B(l,3.5,E(.44,.05,r));l=B(l,2.6,E(.36,.03,r));y n=.3+.2*D(.35,.30,r);l*=1.-n*D(.3,.7,b);l*=1.-.3*S(D(.13,.05,r));l=B(l,2.5,D(.04,.01,r));l-=l*E(.03,.01,r)*.7;c=B(c,C(68,66,54)*l,m);c*=1.-S(E(.34,.02,r));c*=1.-S(E(.46,.03,r));c*=1.-E(.41,.03,r)*.7;A c;}j bs(j w,y s){A j(1.-K(w)/s,ac(K(w)-s));}an(lpdmnd){y b=F(w,j(5),.9,3.),t,o,k,r;z c=dmnd2c(w);j u,v;u.r=M(w.r-.5);u.g=P(w.g,.4);r=K(u-j(0,.4))-(.18-.06*D(.4,1.,w.g));k=.25-.15*D(.9,.96,w.g)+.03*S(D(.82,.86,w.g))+.07*D(.8,.2,w.g)+.07*S(D(.35,.22,w.g))-.07*D(.22,.0,w.g);o=R(w-j(.5,.5),j(k,.46));o=O(o,-R(u,j(.15,.03))+.06);c=B(c,z(.6,.55,.55)-w.g*.3+b*.2,ac(o));c*=1.-.7*E(.0,.013,o);c*=1.-(r/.5-.1)*ac(o);t=O(r,w.g-.96);o=M(t-.02)-.03;o=O(o,w.g-1.+u.r*.5);o=O(o,w.g-.96);c=B(c,z(1,1,.9)-w.g*.55,E(-.01,.01,o));c=B(c,z(.2*b+.1),ac(t,.01));c*=1.-.2*E(.0,.05,t)*ac(o);v=bs(u=w-j(.5,.4),.02);c*=1.+C(111,80,70)*E(.03,.01,K(u));c*=1.-.5*E(.02,.01,K(u));c=B(c,C(111,66,44)*(v.r*1.5+.2),v.g);A I(c,ac(t-.03,.02));}W lpdmnd_m(){I c=ah(ag,Q);j w=J(Q);w.r=M(.5-w.r);y t=J(-aa.r),r=K(w-j(0,.4)),l=t*pow(O(0.,1.-r),4.)*c.a;if(t>.75)l+=D(.03,.01,M(J(w.g+w.r*.5+t*2.)-.45))*D(.1,.08,w.r);U=I(c.T*ak()+C(180,150,5)*l,1);}L(mtlfw10){y b=F(w,j(5),.9,3.,4);z c=B(C(44,14,16),C(93,63,63),b*b);A c;}z aV(j w){y e=3e-3,a=0.;j g=j(6),r=aO(w,g);for(int i=0;i<9;++i)a+=a9(M(aO(j(i%3-1,i/3-1)*e+w,g)-r));A z(w+r.rg/g,a);}L(mtlfw15){y b=F(w,j(3),.9,3.,4);z c=B(C(80,70,72),C(128,120,120),b*b);z v=aV(w);c*=B(.95,1.1,V(v.rg,j(6)));c=B(c,C(168,128,120),D(.5,1.,v.b)*b*.7);A c;}an(mtlfw15ow){y b=F(w,j(3),.9,3.,4);z c=B(C(80,70,72),C(128,120,120),b*b);z v=aV(w);y m=D(.5,1.,v.b);y r=D(.4,.2,K(.5-J(v.rg)));c*=B(.95,1.1,V(v.rg,j(6)))-2.*r*b*b;c=B(c,C(168,128,120),m*b*.7);A I(c,m*r);}W mtlfw15ow_m(){I c=ah(ag,Q);U=I(c.T*ak()+E(.5,.125,J(Q.g*.5+aa.r*.5))*c.a*.3,1);}L(mtlfb3){y b=F(w,j(5),.9,3.,4);z pt=aJ(w,8.,.31);z c=B(C(66,58,55),C(118,107,105),b);y l=1.-.5*D(.034,.036,pt.r);l=B(l,1.4,E(.033,.004,pt.r));A c*l;}y bt(j w){y b=V(w,j(64)),f=0.,d=1e6;for(;f<11.;++f)d=bn(d,M(K(.5-M(w-ba(f)))-B(.36,.29,bc(f+.7)))-B(.015,.03,b),.01);A d*1e2;}z aW(j w){z s,p;for(int i=0;i<3;++i){p=z(w,0);p[i]+=1e-4;s[i]=bt(p.rg);}A z(a8(s.rg-s.b),s.b);}L(mtlt12f){y b=F(w,j(5),.9,3.,4),l;z c=B(C(51,46,43),C(165,147,143),b*b),d=aW(w);l=1.-.5*(d.g-d.r)*E(.5,3.,d.b)*D(1.,.0,d.b);A c*l*.8;}L(mtlt6f){y b=F(w,j(3),1.1,3.,4),l;z c=B(C(51,46,43),C(165,147,143),b*b),d=aW(w);l=1.-.5*(d.g-d.r)*E(.5,3.,d.b)*D(1.,.0,d.b);A c*l;}L(mtlbk03){y b=F(w,j(5),.9,3.,4);z c=B(C(36,35,33),C(56,54,52),b*b);A c;}L(gmtlbg6){y b=F(w,j(13),1.,3.,4);z c=B(C(36,35,31),C(132,132,132),b);A c;}L(glrgbk3b){y b=F(ao(w,5.,.02),j(5),1.,3.,5),n=V(w,j(13));j p=bh(w,j(8)),q=J(p),am=p-q;z c=C(91,61,42)*(.8+.8*b*b);c=B(c,C(70,30,15)*(.8+.8*b*b),a1(q,.1).b*.3);c*=1.-S(a1(q,.01+b*.05).b)*n*b*b;c*=1.+E(.4,.3,a1(q,.01+b*.07).b)*sqrt(b)*.3;c*=.9+.2*H(am)*(1.-a1(q,.1).b);c*=.9+.4*pow(aF(w-H(am/8.),j(5),.6,2.,4),4.);A c;}L(gblks15){y b=F(w,j(5),.9,3.,4),t=aF(ao(w,4.,.01),j(7),.5,3.,5),n=V(ao(w,4.,.05),j(9)),am,e;z pt=aJ(w,4.,.1+n*t*.05),c;j d=aI(pt.r);am=H(J(pt.gb));c=C(91,67,61)*(.8+b*b*.8);c+=E(.6,.3,n)*D(.3,.9,b*t)*.2;c*=1.-E(.5,.4,n)*D(.5,.7,t)*.1;c=B(c,C(86,74,78),E(.5,.1,b)*E(.7,.3,am)*.7);c=B(c,C(105,90,70),E(.3,.1,t)*E(.3,.3,am)*.3);e=E(.015,.005+.015*n,pt.r)+E(.4,.1,n*t)*.4;c*=1.-b*D(.015,.05,pt.r)*.7;c*=1.+e*b*(d.g-.5)*.7;c*=.9+.2*am;c*=.9+.2*at(V(w-pt.gr,j(5)));A c;}L(gtprst3){y b=F(w,j(13),.9,3.,4),n=V(ao(w,4.,.05),j(9));z c=B(C(56,48,49),C(100,50,40),.7*(n+b)*.5)*(.875+b*b);A c;}L(gskull4){y b=F(w,j(13),.9,3.,4);z c=C(60,50,46)*(.875+b*b);A c;}L(gmtlspsld){y b=F(w,j(7),.9,3.,4),n=F(w,j(5),.9,3.,4);z c=B(C(103,56,53),C(73,58,71),smoothstep(.4,.5,n))*(.75+b*b);A c;}I bu(j w,y s){A I(w/=s,sqrt(af(1.-aZ(w))),K(w)-1.);}y bw(z n){y l=a9(n.gb)*.7;A pow(af(l),4.)+l;}y by(I b,y s){y t=D(s,-s,b.g);A af(t*s-b.a)*t;}z aD(z c,j w,y s){I b=bu(w,s);c*=1.+bw(b.T)*ac(b.a)*.5;c*=1.-S(by(b,1.7))*(1.-ac(b.a))*.3;A c;}L(gmtlsp4b){y b=F(w,j(13),.9,3.,4),n=V(ao(w,5.,.05),j(9)),d=at(J(w.r*4.)),m=D(.1,.15,d)*D(1.,.99,w.g);z c=C(51,44,44);c=B(c,C(73,55,52),D(.2,.2,b)*n*m);c=B(c,C(69,60,66),D(.7,.1,b)*b*m);c=B(c,C(99,77,77),D(.1,.5,n)*n*m*b*b*.3);c*=.6+.3*b+.3*b*b;c*=1.+.9*S(E(.21,.02+.1*n,d+b*.05))*m*b;c*=1.-S(D(.49,.5,M(w.g-.5)));c*=1.-D(.05,.2,d)*D(.16,.1,d);c*=1.+E(.99,.007,w.g);A aD(c,j(d-.4,J(w.g*8.)-.5),.07);}z aX(j w,y s){y b=F(w,j(3,1.+s+s),.5,2.,4),d=at(w.r);w.g*=2.;z c=B(C(71,60,58),C(110,88,77),D(.1,.05,d))*(.7+.6*b);c*=1.-D(.05,.0,w.r);c*=1.+.5*E(.05,.02,w.r);A aD(c,j(d-.4,J(w.g*s)-.5),.08);}L(gspbdrbb){A aX(w,4.);}L(gkarntwr4a){A gspbdrbb(w.gr);}L(gkarntwrst){A aX(w,1.);}L(gxstrtop4){y b=F(w,j(40,5),.9,3.,4);z c=C(110,110,98)*(.8+.8*b*b);if(w.g<1./4.)c*=.5;c*=1.-.4*D(.4,.0,b)+.5*D(.02,.0,w.g)+.2*E(.24,.01,w.g);A c;}L(gwdclg1a){j p=w,q;p.g*=22.;q=J(p);y b=F(w,j(3,23),1.,2.,6),n=F(w,j(3,33),.7,3.,4),am=H(p.g-q.g);z c=C(92,67,53)*(.8+.8*b*b);c*=1.-S(D(.1,.0,P(q.g,1.-q.g)))*b;c*=1.-.2*smoothstep(.3,.7,n);c*=.8+.3*b*am;A c;}L(gwdclg1bd){y b=F(w,j(13),.9,3.,4),x=w.r*16./3.;z c=gwdclg1a(w)*D(.15,.21,w.r);if(x<1.)c=C(59,48,49)*(.7+.6*b);c*=1.+.5*E(.05,.05,at(x));A aD(c,j(M(w.r-3./32.)-.07,mod(w.g,.1)-.05),.004);}L(cable){y b=F(w,j(5),.9,3.,4),h=J(w.g*10.);z c=B(C(53,48,42),C(38,38,36),b);c*=.6+b*.8;c*=1.-.5*S(E(.5,.5,h));c*=1.+.5*S(E(.25,.25,h));c*=1.+.5*S(E(.65,.35,h));A c;}L(bmtsprt){y b=F(w,j(7,3),.9,3.,4),h=w.g+b*.04,l=1.-.15;z c=B(C(59,48,40),C(110,108,102),b*b);l=B(l,.5,E(.34,.05,w.g));l=B(l,.5,D(.08,.05,M(w.g-.7)));l=B(l,.3,E(.7,.03,w.g));l=B(l,1.5,E(.01,.03,w.g));l=B(l,2.2,E(.89,.1,h));l=B(l,1.6,D(.07,.04,M(w.g-.44)));l=B(l,2.5,E(.5,.04,h));l=B(l,1.7,E(.18,.04,h));A c*l;}L(brdr11b){y b=F(w,j(5,3),.9,3.,4);z c=B(C(74,66,55),C(99,90,78),b*b);w.r*=2.;j p=a7(w,j(.5,.625),j(1.5,.625));y d=K(p-w),m=D(.22,.20,d),l=1.-.15*m;l=B(l,.5,D(.7,.9,w.g)*m);l=B(l,1.-aI(d).g*.5,E(.22,.04,d));l=B(l,.6,S(E(.19,.05,d)));l=B(l,.5,D(.05,0.,w.g));l=B(l,.5,E(.26,.05,w.g));l=B(l,1.7,D(.93,1.,w.g));l=B(l,1.7,E(.23,.04,w.g));A c*l;}an(blt414k){y b=F(w,j(1,5),.4,3.,4);z c=B(C(56,49,43),C(142,136,136),b);w=.5-M(w-.5);w.g*=4.;y a=E(.0,.1,K(w-a7(w,j(.41,.5),j(.42,3.5)))),d=a6(w),l=1.-.7*O(0.,1.-d/.15);l*=1.-.8*D(.24,.31,P(d,w.g-.1));c+=C(80,80,20)*a;A I(c*B(l,2.7,a),a);}an(light5){y b=F(w,j(1,5),.4,3.,4);z c=B(C(56,49,43),C(142,136,136),b);w=.5-M(w-.5);w.g*=8.;y d=K(w-a7(w,j(.27,.3),j(.27,7.7))),a=E(.0,.17,d),l=1.-.5*E(.17,.07,d);c+=C(80,80,20)*a;A I(c*B(l,2.7,a),a);}an(lt2){j p=M(w-.5);y b=F(w,j(1),.4,3.,4),r=K(p),a=D(.37,.33,r)*(.5+2.*b),l=1.+.0*D(.08,.03,M(r-.41));z c=B(C(56,49,43),C(142,136,136),b);l=B(l,7.,D(.44,.1*b,r));l*=1.-.5*S(E(.46,.04,r));l*=1.-.4*S(E(.36,.04,r));A I(c*l,a);}an(icon){w.g-=.57;w.r=M(w.r-.48);y d=aH(w,j(.31,.12))/50.;d=O(d,-aH(w-j(0,.01),j(.28,.07))/120.);d=O(d,-R(w-j(.0,.1),j(.22,.12)));d=O(d,-R(w-j(.0,.1),j(.09,.31)));d=P(d,aC(w-j(.0,-.09),j(E(-.09,.32,w.g)*.04,.32)));d=P(d,aC(w-j(.11,-.21),j(E(-.07,.3,w.g)*.03,.15)));w.g+=.07;y b=K(w)-.47,m=ac(b);z c=1.-z(.7,1,1)*ac(O(.007-d,b+.04));A I(c*m,m);}an(q3bnr){w*=j(256,64);w.g+=2.;y d=aG(w-j(81,30),11.);d=O(d,w.r-80.);d=O(d,-aG(w-j(84,26),9.));d=P(d,R(w-j(73,37),j(4,9))-4.);d=O(d,-R(w-j(73,37),j(0,7))+1.);d=P(d,R(w-j(91.5,47),j(4,19))-4.);d=O(d,-R(w-j(91.5,47),j(0,17.5))+1.);d=P(d,R(bo(w,111.)-j(105.+D(23.,50.,w.g)*3.,43),j(3.5,19)));d=P(d,R(w-j(111,32),j(4,3)));d=P(d,R(w-j(126,37),j(3,13)));d=P(d,R(w-j(125.5+D(23.,50.,w.g)*10.,44),j(3.5,6)));d=P(d,R(w-j(136.5-D(23.,50.,w.g)*9.,32),j(3.5,8)));d=P(d,R(w-j(148.5,37),j(7,13)));d=O(d,-R(w-j(155,33),j(6,3)));d=O(d,-R(w-j(155,43),j(6,2)));d=P(d,R(w-j(168,37),j(3.5,13)));d=P(d,R(w-j(178.,37),j(3.5,13)));d=P(d,R(w-j(188,37),j(3.5,13)));d=O(d,w.g-50.);A I(ac(d,.8),0,0,H(w*511.));}W q3bnr_m(){z c=ah(ag,Q*2.).T*step(.5,J(aa.r*.5));c=B(c*ak(),z(.5,0,0),E(J(aa.r*2.),1./64.,J(Q.g)));U=I(c+aS(Ref)*.25+ah(ag,Q+H(aa.rr)).a*.1,1);}W beam(){j w=J(aT(Pos.T,aU(Nor))/128.);w.r+=aa.r/33.;y b=F(w,j(7),.9,2.),f=J(Pos.b/128.-.375);U=I(2.*C(95,85,80)*f*f*f*f*B(1.,b,.5),0.);}W flame(){j w=J(Q),p=w;p.g+=p.g-aa.r;w.r+=sin(p.g*7.)*.2*w.g;y n=F(p+sin(p.gr*az*9.+j(0,aa.r*9.))*.015+V(p,j(5))*.1,j(13),.4,3.,4),b=R(w-j(.5,.25),j(.05*S(D(.4,.2,w.g)),.1)),m=S(ac(b+n*.25,.35));U=D(.0,.4,m)*I(7,.5,.2,0);}W Generic(){y l=dot(Nor,a8(z(2,0,8)));l=l*.4+.7;j w=aT(Pos,aU(Nor));z c=z(.5);c*=bq(z(J(a5*aa.a+.25),1.,1.));U=I(c*l,1);}W fixture(){I c=ah(ag,Q);U=I(c.T*B(ak(),z(1),c.a),1);}W dmnd2cjp_m(){I c=ah(ag,Q);y r=K(J(Q)-.5);y s=B(.4,8.,J(aa.r*1.5));U=I(c.T*ak()+C(240,130,5)*E(.1,.05,r/s)*D(.37,.32,r),1);}W Lmapped(){z c=ah(ag,Q).T;U=I(c*ak(),1);}W shiny(){I c=ah(ag,Q);c.T*=1.+c.a*aS(Ref);U=I(c.T*ak(),1);}W timhel(){z d=a8(Pos-Cam.T);d.b=d.b*4.+2.;j w=a8(d).rg*2.;y b=F(w-aa.r*j(.1,.2),j(5),.5,2.,6);w.g*=1.5;y s=D(.3,1.,F(w-aa.r*j(.1,.18),j(5),.6,2.,6));U=I(z(b,0,0)+C(80,30,8)*s*s*2.,1);}W lava(){j w=ao(Q/8.,aa.r*.5,2.,.05);y b=F(w,j(7),.9,2.,4);z c=C(91,22,14)*(.2+1.6*b);c=B(c,C(144,44,0),E(.6,.2,F(w,j(3),.7,3.,4)));c=B(c,C(244,144,66)*b*2.,S(E(.55,.25,F(w,j(11),.5,2.,4))));U=I(c*af(ar(ak())),1);}W lavaf(){lava();}W Loading(){U=ah(ag,(.5+Q*127.)/128.,2.5);U.T*=.7+.3*V(Q,.5/fwidth(Q));}W UI(){U=ah(ag,Q)*Clr;}";

// src/demo/data/shaders/vertex_shaders.glsl: 2177 => 1363 (62.6%)
const char g_vertex_shaders[] =
"#define c void\n"
"#define e location\n"
"#define f gl_Position\n"
"uniform mat4 MVP;uniform vec4 Time,Cam;layout(e=0)in vec4 P;layout(e=1)in vec4 T;layout(e=2)in vec3 N;layout(e=3)in vec4 C;out vec3 Pos,Nor,Ref;out vec2 UV,LUV;out vec4 Clr;c Generic(){f=MVP*P;Pos=P.rgb;Nor=N;UV=T.rg;LUV=T.ba;Ref=normalize(reflect((P-Cam).rgb,N));}c d(){f=P;UV=P.rg*.5+.5;}c UI(){f=vec4(2.*P.r-1.,1.-2.*P.g,1,1);UV=T.rg;Clr=C;}c cmet52(){d();}c dmnd2c(){d();}c dmnd2cow(){d();}c dmnd2cjp(){d();}c dmnd2pnt(){d();}c lpdmnd(){d();}c ptrshn(){d();}c mtlfw10(){d();}c mtlfw15(){d();}c mtlfw15ow(){d();}c mtlfb3(){d();}c mtlt12f(){d();}c mtlt6f(){d();}c mtlbk03(){d();}c gmtlbg6(){d();}c glrgbk3b(){d();}c gblks15(){d();}c gtprst3(){d();}c gskull4(){d();}c gmtlspsld(){d();}c gmtlsp4b(){d();}c gspbdrbb(){d();}c gkarntwr4a(){d();}c gkarntwrst(){d();}c gxstrtop4(){d();}c gwdclg1a(){d();}c gwdclg1bd(){d();}c bmtsprt(){d();}c cable(){d();}c brdr11b(){d();}c blt414k(){d();}c light5(){d();}c lt2(){d();}c icon(){d();}c q3bnr(){d();}c Loading(){d();}c Lmapped(){Generic();}c mtlfw15ow_m(){Generic();}c dmnd2cjp_m(){Generic();}c dmnd2pnt_m(){Generic();}c lpdmnd_m(){Generic();}c fixture(){Generic();}c beam(){Generic();}c flame(){Generic();}c q3bnr_m(){Generic();}c shiny(){Generic();}c timhel(){Generic();}c lavaf(){Generic();}c lava(){Generic();f+=MVP[2]*sin(Time.r*.5+dot(P.rgb/1e2,vec3(1)))*4.;}";
