#pragma once
// auto-generated, do not modify (see cook_shader.js)

// trim_newlines       : true
// consistent_floats   : false
// rename_ids          : true
// rename_vec_fields   : true
// rename_globals      : true
// min_macro_savings   : 8

// src/demo/data/shaders/fragment_shaders.glsl: 38372 => 17377 (45.3%)
const char g_fragment_shaders[] =
"#define w vec2\n"
"#define z float\n"
"#define A vec3\n"
"#define B return\n"
"#define E mix\n"
"#define J vec4\n"
"#define K fract\n"
"#define M abs\n"
"#define P max\n"
"#define Q length\n"
"#define R min\n"
"#define T UV\n"
"#define W rgb\n"
"#define X FCol\n"
"#define Y void\n"
"#define ad Time\n"
"#define ai Texture0\n"
"#define ak texture\n"
"#define al int\n"
"#define ay sqrt\n"
"#define a5 floor\n"
"#define aH normalize\n"
"uniform J ad,Cam;uniform sampler2D ai,Texture1;in A Pos,Nor,Ref;in w T,LUV;in J Clr;out J X;\n"
"#define bp(x)((x)*(x)*(3.-2.*(x)))\n"
"#define L(x)(x)*(x)\n"
"#define bq(x)dot(x,x)\n"
"#define ah(x)clamp(x,0.,1.)\n"
"#define D(r,g,b)(A(r,g,b)/255.)\n"
"z a4=3.1415927,bF=2.*a4,aC=1.618034;w bs(z i){z G=1.324718;B K(.5+i/w(G,G*G));}z bt(z i){B K(.5+i*aC);}z aD(w v){B R(v.r,v.g);}z aD(A v){B R(v.r,R(v.g,v.b));}z aD(J v){B R(R(v.r,v.g),R(v.b,v.a));}z aw(w v){B P(v.r,v.g);}z aw(A v){B P(v.r,P(v.g,v.b));}z aw(J v){B P(P(v.r,v.g),P(v.b,v.a));}z aE(w v){B v.r+v.g;}w bu(w v){z l=dot(v,v);B l>0.?v/ay(l):v;}z F(z bw,z by,z x){B 1.-ah(M(x-bw)/by);}z C(z aP,z bz,z x){B ah((x-aP)/(bz-aP));}w Z(z x){B w(sin(x),cos(x));}mat2 aJ(z x){w v=Z(radians(x));B mat2(v.g,v.r,-v.r,v.g);}w aj(w j,z p,z s){B j+sin(j.gr*a4*p)*s;}w aj(w j,z t,z p,z s){B j+sin(j.gr*a4*p+t)*s;}z aK(z v,z m){B m-M(v-m);}w aK(w v,z m){v.r=aK(v.r,m);B v;}w b0(w j,w s){j.r+=a5(j.g*s.g)*(.5/s.r);B K(j)*s;}A a6(w j,z r){B A(j-=clamp(j,r,1.-r),Q(j)/r);}A a6(w j,w s,z r){s=s.gr/aD(s);j*=s;B A(j-=clamp(j,w(r),s-r),Q(j)/r);}z H(w p){A q=K(p.rgr*.09153);q+=dot(q,q.gbr+19.19);B K((q.r+q.g)*q.b);}z H(z p){p=K(p*.1031);p*=p+33.33;p*=p+p;B K(p);}A bG(z p){A ae=K(A(p)*A(.1031,.1030,.0973));ae+=dot(ae,ae.gbr+33.33);B K((ae.rrg+ae.gbb)*ae.bgr);}w b1(w p){A ae=K(A(p.rgr)*A(.1031,.1030,.0973));ae+=dot(ae,ae.gbr+33.33);B K((ae.rr+ae.gb)*ae.bg);}J b2(z p){J af=K(J(p)*J(.1031,.1030,.0973,.1099));af+=dot(af,af.abrg+33.33);B K((af.rrgb+af.gbba)*af.bgar);}J b2(w p){J af=K(J(p.rgrg)*J(.1031,.1030,.0973,.1099));af+=dot(af,af.abrg+33.33);B K((af.rrgb+af.gbba)*af.bgar);}z aa(z x,z p){B H(mod(x,p));}z N(z x){z i;B E(H(i=a5(x)),H(i+1.),bp(x-i));}z V(z x,z p){z i;B E(aa(i=a5(x),p),aa(i+1.,p),x-i);}z aa(w p,w s){B H(mod(p,s));}z V(w p,w s){p*=s;w i=a5(p);p-=i;p*=p*(3.-2.*p);z b3=aa(i+w(0,0),s);z b4=aa(i+w(0,1),s);z b5=aa(i+w(1,1),s);z b6=aa(i+w(1,0),s);B E(E(b3,b6,p.r),E(b4,b5,p.r),p.g);}z I(w p,w ao,z a7,z a8,al aL){z a9=V(p,ao),av=1.,tw=1.;for(al i=0;i<aL;++i){p=K(p+aC);ao*=a8;av*=a7;a9+=V(p,ao)*av;tw+=av;}B a9/tw;}z I(w p,w ao,z a7,z a8){B I(p,ao,a7,a8,4);}\n"
"#define az(v)F(.5,.5,v)\n"
"z aQ(w p,w ao,z a7,z a8,al aL){z a9=az(V(p,ao)),av=1.,tw=1.;for(al i=0;i<aL;++i){p=K(p+aC);ao*=a8;av*=a7;a9+=az(V(p,ao))*av;tw+=av;}B a9/tw;}w aF(w p,w a,w b){w ab=b-a,ap=p-a;z t=ah(dot(ap,ab)/dot(ab,ab));B ab*t+a;}z U(w p,w b){w d=M(p)-b;B R(P(d.r,d.g),0.)+Q(P(d,0.));}z aA(w p,w b){B aw(M(p)-b);}z am(w p,z r){B Q(p)-r;}z aM(w p,w r){B am(p/r,1.)/R(r.r,r.g);}z aN(z a,z b){B P(a,-b);}z aR(z a,z b,z k){z h=ah(.5+0.5*(b-a)/k);B E(b,a,h)-k*h*(1.-h);}w aS(z x){w d=w(dFdx(x),dFdy(x));B d/P(Q(d),1e-8);}z S(z s,z d){B ah(1.-s/d);}z S(z s){B ah(1.-s/fwidth(s));}\n"
"#define aO(b7,j,b8){w p[3];z r[3];p[0]=j;p[1]=j+dFdx(j);p[2]=j+dFdy(j);for(al i=0;i<3;++i)r[i]=b8;b7=A(bu(w(r[1],r[2])-r[0]),r[0]);}\n"
"J aT(w j,z s){B J(j/=s,ay(ah(1.-bq(j))),Q(j)-1.);}z b9(A n){z l=aE(n.gb)*.7;B pow(ah(l),4.)+l;}z aU(w j,z s){j/=s;j.g+=.06;j.r*=2.;B C(.3,.0,Q(j));}A aG(A c,w j,z s){J b=aT(j,s);c*=1.+b9(b.W)*S(b.a)*.5;c*=1.-L(aU(j,20.*s))*(1.-S(b.a))*.3;B c;}A aV(w p,z Z,z bA){A e=A(-1,0,1),r=A(1e5);w ag=a5(p*Z),bH=e.gg;p-=(ag+.5)/Z;z ac=.5*aa(ag+e.gg,w(Z));z a0=.5*aa(ag+e.rg,w(Z));z a1=.5*aa(ag+e.gb,w(Z));z a2=.5*aa(ag+e.bg,w(Z));z a3=.5*aa(ag+e.gr,w(Z));z aW=.5*aa(ag+e.rb,w(Z));z aX=.5*aa(ag+e.bb,w(Z));z aY=.5*aa(ag+e.br,w(Z));z aZ=.5*aa(ag+e.rr,w(Z));w[4]an,l;if(mod((ag.r+ag.g),2.)<.5){l[0]=1.+w(a1-a0,aW-ac);l[1]=1.+w(-a1+a2,aX-ac);l[2]=1.+w(-a3+a2,-aY+ac);l[3]=1.+w(a3-a0,-aZ+ac);an[0]=w(a1,ac)+l[0]*w(-.5,.5);an[1]=w(a1,ac)+l[1]*w(.5,.5);an[2]=w(a3,ac)+l[2]*w(.5,-.5);an[3]=w(a3,ac)+l[3]*w(-.5,-.5);}else{l[0]=1.+w(-aW+ac,a1-a0);l[1]=1.+w(aX-ac,a1-a2);l[2]=1.+w(aY-ac,-a3+a2);l[3]=1.+w(-aZ+ac,-a3+a0);an[0]=w(ac,a0)+l[0]*w(-.5,.5);an[1]=w(ac,a2)+l[1]*w(.5,.5);an[2]=w(ac,a2)+l[2]*w(.5,-.5);an[3]=w(ac,a0)+l[3]*w(-.5,-.5);}for(al i=0;i<4;i++){l[i]/=Z;z bx=aA(p-an[i]/Z,l[i]/2.-bA/Z);if(bx<r.r)r=A(bx,ag+an[i]);}B r;}w ba(w p,w bc){p*=bc;w n=a5(p),f=p-n,bd,g,o,r;z be=8.0,d;for(al i=0;i<9;++i){g=w(i%3-1,i/3-1);o=b1(mod(n+g,bc));r=g+o-f;d=aE(M(r));if(d<be){be=d;bd=r;}}B bd;}z bf(A p){p=aH(p);A a=mod(degrees(atan(p,p.gbr)),360.);B V(a.r/8.,45.)*C(.9,.0,M(p.b))+V(a.g/8.,45.)*C(.7,.0,M(p.r));}w bh(A p,al ax){B(ax==0)?p.gb:(ax==1)?p.rb:p.rg;}al bi(A n){n=M(n)+A(.01,.02,.03);z m=aw(n);B(m==n.r)?0:(m==n.g)?1:2;}A bB(A c){A W=ah(M(mod(c.r*6.+A(0,4,2),6.)-3.)-1.);W*=W*(3.-2.*W);B c.b*E(A(1.),W,c.g);}A aq(){A d=Cam.W-Pos;z b=I(d.rg/256.*aJ(Cam.a),w(3),.7,3.,4),l=1.-C(14.,-6.,Q(d.rg)-b*8.)*C(128.,48.,d.b)*step(.1,Nor.b);B ak(Texture1,LUV).W*3.*l;}\n"
"#define O(ar)A ar(w);Y ar(){X=J(ar(T),1);}A ar(w j)\n"
"#define as(ar)J ar(w);Y ar(){X=ar(T);}J ar(w j)\n"
"O(cmet52){z b=I(j,w(5),.9,3.,4);A c=E(D(48,41,33),D(103,101,104),b);B c;}O(ptrshn){z b=I(j,w(3),.9,3.,4);A c=E(D(49,45,43),D(81,75,78),b*b);B c;}O(dmnd2c){z b=I(j,w(7),.9,3.);j.r*=-1.5;j.g+=j.r*.5;j.r=1.-j.r+j.g;j=K(j*28.);z f=ah(1.-Q(.1-j));f*=C(.6,.2,Q(.6-j));f*=C(.6,.8,Q(.1-j));f*=C(.2,.6,b)*2.+1.;z l=1.-C(.2,b+2.,aw(M(j-.5)));B A((f+1.)*E(.21,.29,b*b)*l);}O(dmnd2cow){z b=I(j,w(7),.9,3.);A c=dmnd2c(j);z r=Q(j-.5);c=E(c,c*D(70,61,53),C(.5,.2,r+b*b*b));B c;}z bj(w j,z s){z d=1e6,i=0.;for(;i<5.;++i){w p=w(0,-s)*aJ(i*72.);d=R(d,Q(j-aF(j,p,p*aJ(144.))));}B d;}as(dmnd2pnt){A c=dmnd2cow(j);j=K(j)-.5;z b=I(j,w(3),.9,3.),d=R(M(Q(j)-.4),bj(j,.35));B J(c,S(d-.02+b*.02,.01));}Y dmnd2pnt_m(){J c=ak(ai,T);X=J(c.W*aq()+D(111,55,0)*c.a*(sin(ad.r*a4)*.5+.5),1);}O(dmnd2cjp){z b=I(j,w(7),.9,3.,4);A c=dmnd2c(j);z r=Q(j-.5);z m=C(.46,.45,r);z l=1.5-1.5*C(.0,.3,r*r);l=E(l,2.5,F(.42,.07,r));l=E(l,3.5,F(.44,.05,r));l=E(l,2.6,F(.36,.03,r));z n=.3+.2*C(.35,.30,r);l*=1.-n*C(.3,.7,b);l*=1.-.3*L(C(.13,.05,r));l=E(l,2.5,C(.04,.01,r));l-=l*F(.03,.01,r)*.7;c=E(c,D(68,66,54)*l,m);c*=1.-L(F(.34,.02,r));c*=1.-L(F(.46,.03,r));c*=1.-F(.41,.03,r)*.7;B c;}w bC(w j,z s){B w(1.-Q(j)/s,S(Q(j)-s));}as(lpdmnd){z b=I(j,w(5),.9,3.),t,o,k,r;A c=dmnd2c(j);w u,v;u.r=M(j.r-.5);u.g=R(j.g,.4);r=Q(u-w(0,.4))-(.18-.06*C(.4,1.,j.g));k=.25-.15*C(.9,.96,j.g)+.03*L(C(.82,.86,j.g))+.07*C(.8,.2,j.g)+.07*L(C(.35,.22,j.g))-.07*C(.22,.0,j.g);o=U(j-w(.5,.5),w(k,.46));o=P(o,-U(u,w(.15,.03))+.06);c=E(c,A(.6,.55,.55)-j.g*.3+b*.2,S(o));c*=1.-.7*F(.0,.013,o);c*=1.-(r/.5-.1)*S(o);t=P(r,j.g-.96);o=M(t-.02)-.03;o=P(o,j.g-1.+u.r*.5);o=P(o,j.g-.96);c=E(c,A(1,1,.9)-j.g*.55,F(-.01,.01,o));c=E(c,A(.2*b+.1),S(t,.01));c*=1.-.2*F(.0,.05,t)*S(o);v=bC(u=j-w(.5,.4),.02);c*=1.+D(111,80,70)*F(.03,.01,Q(u));c*=1.-.5*F(.02,.01,Q(u));c=E(c,D(111,66,44)*(v.r*1.5+.2),v.g);B J(c,S(t-.03,.02));}Y lpdmnd_m(){J c=ak(ai,T);w j=K(T);j.r=M(.5-j.r);z t=K(-ad.r),r=Q(j-w(0,.4)),l=t*pow(P(0.,1.-r),4.)*c.a;if(t>.75)l+=C(.03,.01,M(K(j.g+j.r*.5+t*2.)-.45))*C(.1,.08,j.r);X=J(c.W*aq()+D(180,150,5)*l,1);}O(mtlfw10){z b=I(j,w(5),.9,3.,4);A c=E(D(44,14,16),D(93,63,63),b*b);B c;}A bk(w j){z e=3e-3,a=0.;w g=w(6),r=ba(j,g);for(al i=0;i<9;++i)a+=aE(M(ba(w(i%3-1,i/3-1)*e+j,g)-r));B A(j+r.rg/g,a);}O(mtlfw15){z b=I(j,w(3),.9,3.,4);A c=E(D(80,70,72),D(128,120,120),b*b);A v=bk(j);c*=E(.95,1.1,V(v.rg,w(6)));c=E(c,D(168,128,120),C(.5,1.,v.b)*b*.7);B c;}as(mtlfw15ow){z b=I(j,w(3),.9,3.,4);A c=E(D(80,70,72),D(128,120,120),b*b);A v=bk(j);z m=C(.5,1.,v.b);z r=C(.4,.2,Q(.5-K(v.rg)));c*=E(.95,1.1,V(v.rg,w(6)))-2.*r*b*b;c=E(c,D(168,128,120),m*b*.7);B J(c,m*r);}Y mtlfw15ow_m(){J c=ak(ai,T);X=J(c.W*aq()+F(.5,.125,K(T.g*.5+ad.r*.5))*c.a*.3,1);}O(mtlfb3){z b=I(j,w(5),.9,3.,4);A pt=aV(j,8.,.31);A c=E(D(66,58,55),D(118,107,105),b);z l=1.-.5*C(.034,.036,pt.r);l=E(l,1.4,F(.033,.004,pt.r));B c*l;}z bD(w j){z b=V(j,w(64)),f=0.,d=1e6;for(;f<11.;++f)d=aR(d,M(Q(.5-M(j-bs(f)))-E(.36,.29,bt(f+.7)))-E(.015,.03,b),.01);B d*1e2;}A bl(w j){A s,p;for(al i=0;i<3;++i){p=A(j,0);p[i]+=1e-4;s[i]=bD(p.rg);}B A(aH(s.rg-s.b),s.b);}O(mtlt12f){z b=I(j,w(5),.9,3.,4),l;A c=E(D(51,46,43),D(165,147,143),b*b),d=bl(j);l=1.-.5*(d.g-d.r)*F(.5,3.,d.b)*C(1.,.0,d.b);B c*l*.8;}O(mtlt6f){z b=I(j,w(3),1.1,3.,4),l;A c=E(D(51,46,43),D(165,147,143),b*b),d=bl(j);l=1.-.5*(d.g-d.r)*F(.5,3.,d.b)*C(1.,.0,d.b);B c*l;}O(mtlbk03){z b=I(j,w(5),.9,3.,4),l=.18*(.7+b*b);A g;j=aj(j,13.,.007);aO(g,j,L(C(.3+b*.2,.9,I(p[i],w(23),.5,2.,4))));B A(l*(1.-g.g*g.b));}O(giron01e){z b=I(j,w(5),.9,3.,4),l=.18*(.7+b*b);A c=E(D(77,55,53),D(62,48,48),V(j,w(128,13)))*(.7+b*b),g;j=aj(j,13.,.007);aO(g,j,L(C(.6+b*.3,.95,V(p[i],w(47,23)))));c*=C(1.3,.9,g.b);B A(c*(1.+g.g*g.b));}z bm(w j,w s){j.g=P(j.g,0.);B aM(j,s);}A bn(w j){B A(.06+.1*H(j*133.7));}A aI(A c,A b,w j,z h,z s){z y=(j.g-h)/s,p=1.-y*y;c*=1.-F(-1.,1.,y);if(p>0.)c=b*(p*(.8+.2*F(.5,.25,K(j.r/s))))*(.7+L(F(.2,.7,y)));B c;}A bn(w j,z n){B A(n*n*.4);}O(giron01nt3){j.r*=.5;z b=I(j*w(2,1),w(3,5),.9,3.,4),n=.8+.8*b*b,t=j.g+.2*R(.5,F(.5,.375,K(j.r*4.))),bE=bm(j-w(.25,.62),w(3,2)/32.),aB=bm(j-w(.25,.55),w(3,2)/48.),r;A c=E(D(66,50,51),D(111,66,44),ay(F(.31,.01,j.g))),at;w p=j,q;p.r=K(p.r*4.);if(j.g>.3)c=aG(c,w(4.*M(p.r-.5)-1.6,K(j.g*16.)-.5),.07);r=M(p.r-.5);c*=1.-.3*C(.31,.33,j.g)*(C(.035,.03,.5-r)+F(.48,.01,r)-F(.46,.02,r));c=E(c*n,bn(j,b),P(C(.31,.3,j.g),S(aB)));c*=C(1.5,.7,j.g);if(j.g<.306)c*=1.-F(.3,.05,j.g)*S(-aB+10.,20.);c*=1.-F(.316,.004,j.g)*S(-aB);if(j.g<.1)c*=.0;q=j;q.g+=F(.1,.01,mod(q.r,.33))/2e2;c=aI(c,2.*b*D(93,84,79),j,.185,.015);c=aI(c,2.*b*D(138,77,48),j,.13,.025);c=aI(c,2.*b*D(112,71,51),j,.09,.015);c=aI(c,2.*b*D(138,77,48),q,.05,.015);p.r=M(K(j.r*6.-.5)-.5)/6.;c*=1.+.5*C(.04,.03,p.r)*F(.18,.03,p.g);r=aA(p-w(0,.12),w(.03,.01));r=aN(r,aA(p-w(0,.11),w(.01)));c*=1.-L(F(.0,.04,r));c=E(c,D(166,99,77)*2.*b*(.75+.5*L(F(.125,.01,j.g))),S(r));q=p;q.g-=.07;r=am(q,.03);c*=1.-L(F(.0,.07,r));c=E(c,D(127,83,72)*b*2.*C(.01,-.005,r),C(.005,.0,r));q.g-=.004;r=am(q,.015);c*=L(C(-.01,.01,r));q.g+=.013;r=am(q,.05);c+=D(67,38,30)*4.*ay(b)*L(F(-.02,.015,r)*F(.023,.02,j.g));r=aN(bE,aB);r=aN(r,(j.g-.3)*3e2);c*=1.-.5*F(-2.,17.,aB)*C(.26,.3,j.g);at=D(67,39,17)*n;at=E(at,A(n*.2),F(0.,4.,r)*b);at*=1.-.4*pow(F(.0,3.,r),4.);at+=(at+.6)*ay(b)*L(F(-6.,8.,r)*F(.66,.04,j.g))*S(r);if(j.g<.55)at=aG(at,w(24.*M(j.r-.25)-1.85,K(j.g*24.+.5)-.5),.15);c=E(c,giron01e(j),C(.85,.9,t)+step(j.g,1./256.));c*=1.+F(.88,.015,t)-L(F(.87,.03,t));B E(c,at,C(1.,.1,r));}O(gmtlbg6){z b=I(j,w(13),1.,3.,4);A c=E(D(36,35,31),D(132,132,132),b);B c;}O(glrgbk3b){z b=I(aj(j,5.,.02),w(5),1.,3.,5),n=V(j,w(13));w p=b0(j,w(8)),q=K(p),au=p-q;A c=D(91,61,42)*(.8+.8*b*b);c=E(c,D(70,30,15)*(.8+.8*b*b),a6(q,.1).b*.3);c*=1.-L(a6(q,.01+b*.05).b)*n*b*b;c*=1.+F(.4,.3,a6(q,.01+b*.07).b)*ay(b)*.3;c*=.9+.2*H(au)*(1.-a6(q,.1).b);c*=.9+.4*pow(aQ(j-H(au/8.),w(5),.6,2.,4),4.);B c;}O(gblks15){z b=I(j,w(5),.9,3.,4),t=aQ(aj(j,4.,.01),w(7),.5,3.,5),n=V(aj(j,4.,.05),w(9)),au,e;A pt=aV(j,4.,.1+n*t*.05),c;w d=aS(pt.r);au=H(K(pt.gb));c=D(74,65,62)*(.8+.8*b*b);c+=F(.6,.3,n)*C(.3,.9,b*t)*.2;c*=1.-F(.5,.4,n)*C(.5,.7,t)*.1;c=E(c,D(86,74,78),F(.5,.1,b)*F(.7,.3,au)*.7);c=E(c,D(105,90,70),F(.3,.1,t)*F(.3,.3,au)*.3);e=F(.015,.005+.015*n,pt.r)+F(.4,.1,n*t)*.4;c*=1.-b*C(.015,.05,pt.r)*.7;c*=1.+e*b*(d.g-.5)*.7;c*=.9+.2*au;c*=.9+.2*az(V(j-pt.gr,w(5)));B c;}O(gtprst3){z b=I(j,w(13),.9,3.,4),n=I(j,w(7),.9,3.,4);A c=E(D(60,50,50),D(87,47,37),L(C(.7,.25,n)))*(.7+.8*b*b),g;j=aj(j,31.,.003);aO(g,j,ay(C(.0,.9,V(p[i],w(93)))));c*=1.-(g.g+.4)*L(b*g.b)*g.b;B c;}O(skcpthrt){z b=I(aj(j,7.,.01),w(9),.7,2.,4);A c=D(127,70,55)*(.85+.3*b);c*=1.-.2*L(C(.2,.05,b*b));c*=1.+.3*C(.6,.9,b);c*=1.-.2*L(F(.6,.3,I(aj(j,5.,.03),w(6),.6,2.,4)));B c;}O(gskull4){z b=I(j,w(13),.9,3.,4);A c=D(60,50,46)*(.875+b*b);B c;}O(gmtlspsld){z b=I(j,w(7),.9,3.,4),n=I(j,w(5),.9,3.,4);A c=E(D(103,56,53),D(73,58,71),smoothstep(.4,.5,n))*(.75+b*b);B c;}O(gmtlsp4b){z b=I(j,w(13),.9,3.,4),n=V(aj(j,5.,.05),w(9)),d=az(K(j.r*4.)),m=C(.1,.15,d)*C(1.,.99,j.g);A c=D(51,44,44);c=E(c,D(73,55,52),C(.2,.2,b)*n*m);c=E(c,D(69,60,66),C(.7,.1,b)*b*m);c=E(c,D(99,77,77),C(.1,.5,n)*n*m*b*b*.3);c*=.6+.3*b+.3*b*b;c*=1.+.9*L(F(.21,.02+.1*n,d+b*.05))*m*b;c*=1.-L(C(.49,.5,M(j.g-.5)));c*=1.-C(.05,.2,d)*C(.16,.1,d);c*=1.+F(.99,.007,j.g);B aG(c,w(d-.4,K(j.g*8.)-.5),.07);}A bo(w j,z s){z b=I(j,w(3,1.+s+s),.7,2.,4),d=az(j.r),m;j.g*=2.;A c=E(D(71,60,58),D(110,88,77),C(.1,.05,d))*(.7+.6*b);c*=1.-C(.05,.0,j.r)*(1.-b*b);c*=1.+.5*F(.05,.02,j.r);w p=w(d-.35,K(j.g*s)-.5);J k=aT(p,.11);m=S(k.a);c*=1.-.7*aU(p,1.1)*(1.-m);c=E(c,(k.g>.0?D(128,105,88):D(200,111,66)*C(-.2,.7,k.b))*(.4+2.*b*pow(ah(aE(k.gb*.7)),4.))*(1.-.6*F(-.1,.4,k.g)),m);B c;}O(gspbdrbb){B bo(j,4.);}O(gkarntwr4a){B gspbdrbb(j.gr);}O(gkarntwrst){B bo(j,1.);}O(gxstrtop4){z b=I(j,w(40,5),.9,3.,4);A c=D(110,110,98)*(.8+.8*b*b);if(j.g<1./4.)c*=.5;c*=1.-.4*C(.4,.0,b)+.5*C(.02,.0,j.g)+.2*F(.24,.01,j.g);B c;}O(gwdclg1a){w p=j,q;p.g*=22.;q=K(p);z b=I(j,w(3,23),1.,2.,6),n=I(j,w(3,33),.7,3.,4),au=H(p.g-q.g);A c=D(92,67,53)*(.8+.8*b*b);c*=1.-L(C(.1,.0,R(q.g,1.-q.g)))*b;c*=1.-.2*smoothstep(.3,.7,n);c*=.8+.3*b*au;B c;}O(gwdclg1bd){z b=I(j,w(13),.9,3.,4),x=j.r*16./3.;A c=gwdclg1a(j)*C(.15,.21,j.r);if(x<1.)c=D(59,48,49)*(.7+.6*b);c*=1.+.5*F(.05,.05,az(x));B aG(c,w(M(j.r-3./32.)-.07,mod(j.g,.1)-.05),.004);}O(cable){z b=I(j,w(5),.9,3.,4),h=K(j.g*10.);A c=E(D(53,48,42),D(38,38,36),b);c*=.6+b*.8;c*=1.-.5*L(F(.5,.5,h));c*=1.+.5*L(F(.25,.25,h));c*=1.+.5*L(F(.65,.35,h));B c;}O(bmtsprt){z b=I(j,w(7,3),.9,3.,4),h=j.g+b*.04,l=1.-.15;A c=E(D(59,48,40),D(110,108,102),b*b);l=E(l,.5,F(.34,.05,j.g));l=E(l,.5,C(.08,.05,M(j.g-.7)));l=E(l,.3,F(.7,.03,j.g));l=E(l,1.5,F(.01,.03,j.g));l=E(l,2.2,F(.89,.1,h));l=E(l,1.6,C(.07,.04,M(j.g-.44)));l=E(l,2.5,F(.5,.04,h));l=E(l,1.7,F(.18,.04,h));B c*l;}O(brdr11b){z b=I(j,w(5,3),.9,3.,4);A c=E(D(74,66,55),D(99,90,78),b*b);j.r*=2.;w p=aF(j,w(.5,.625),w(1.5,.625));z d=Q(p-j),m=C(.22,.20,d),l=1.-.15*m;l=E(l,.5,C(.7,.9,j.g)*m);l=E(l,1.-aS(d).g*.5,F(.22,.04,d));l=E(l,.6,L(F(.19,.05,d)));l=E(l,.5,C(.05,0.,j.g));l=E(l,.5,F(.26,.05,j.g));l=E(l,1.7,C(.93,1.,j.g));l=E(l,1.7,F(.23,.04,j.g));B c*l;}as(blt414k){z b=I(j,w(1,5),.4,3.,4);A c=E(D(56,49,43),D(142,136,136),b);j=.5-M(j-.5);j.g*=4.;z a=F(.0,.1,Q(j-aF(j,w(.41,.5),w(.42,3.5)))),d=aD(j),l=1.-.7*P(0.,1.-d/.15);l*=1.-.8*C(.24,.31,R(d,j.g-.1));c+=D(80,80,20)*a;B J(c*E(l,2.7,a),a);}as(light5){z b=I(j,w(1,5),.4,3.,4);A c=E(D(56,49,43),D(142,136,136),b);j=.5-M(j-.5);j.g*=8.;z d=Q(j-aF(j,w(.27,.3),w(.27,7.7))),a=F(.0,.17,d),l=1.-.5*F(.17,.07,d);c+=D(80,80,20)*a;B J(c*E(l,2.7,a),a);}as(lt2){w p=M(j-.5);z b=I(j,w(1),.4,3.,4),r=Q(p),a=C(.37,.33,r)*(.5+2.*b),l=1.+.0*C(.08,.03,M(r-.41));A c=E(D(56,49,43),D(142,136,136),b);l=E(l,7.,C(.44,.1*b,r));l*=1.-.5*L(F(.46,.04,r));l*=1.-.4*L(F(.36,.04,r));B J(c*l,a);}as(gpntgmlt1k){z b=I(j,w(5),.9,3.,4),d=aR(bj(j-=.5,.35),M(am(j,.4)),.02),a=pow(S(d-.02,.15),8.),o=R(P(U(j,w(.46)),-am(j,.51)),M(am(j,.44)));A c=D(76,62,47)*(.8+.8*b*b);c*=1.+(b+.5)*S(M(o)-.01,.01);c*=1.-C(.1,.05,d)*S(am(j,.4));B J(c+1.*A(1,1,.3)*a,a);}as(icon){j.g-=.57;j.r=M(j.r-.48);z d=aM(j,w(.31,.12))/50.;d=P(d,-aM(j-w(0,.01),w(.28,.07))/120.);d=P(d,-U(j-w(.0,.1),w(.22,.12)));d=P(d,-U(j-w(.0,.1),w(.09,.31)));d=R(d,aA(j-w(.0,-.09),w(F(-.09,.32,j.g)*.04,.32)));d=R(d,aA(j-w(.11,-.21),w(F(-.07,.3,j.g)*.03,.15)));j.g+=.07;z b=Q(j)-.47,m=S(b);A c=1.-A(.7,1,1)*S(P(.007-d,b+.04));B J(c*m,m);}as(q3bnr){j*=w(256,64);j.g+=2.;z d=am(j-w(81,30),11.);d=P(d,j.r-80.);d=P(d,-am(j-w(84,26),9.));d=R(d,U(j-w(73,37),w(4,9))-4.);d=P(d,-U(j-w(73,37),w(0,7))+1.);d=R(d,U(j-w(91.5,47),w(4,19))-4.);d=P(d,-U(j-w(91.5,47),w(0,17.5))+1.);d=R(d,U(aK(j,111.)-w(105.+C(23.,50.,j.g)*3.,43),w(3.5,19)));d=R(d,U(j-w(111,32),w(4,3)));d=R(d,U(j-w(126,37),w(3,13)));d=R(d,U(j-w(125.5+C(23.,50.,j.g)*10.,44),w(3.5,6)));d=R(d,U(j-w(136.5-C(23.,50.,j.g)*9.,32),w(3.5,8)));d=R(d,U(j-w(148.5,37),w(7,13)));d=P(d,-U(j-w(155,33),w(6,3)));d=P(d,-U(j-w(155,43),w(6,2)));d=R(d,U(j-w(168,37),w(3.5,13)));d=R(d,U(j-w(178.,37),w(3.5,13)));d=R(d,U(j-w(188,37),w(3.5,13)));d=P(d,j.g-50.);B J(S(d,.8),0,0,H(j*511.));}Y q3bnr_m(){A c=ak(ai,T*2.).W*step(.5,K(ad.r*.5));c=E(c*aq(),A(.5,0,0),F(K(ad.r*2.),1./64.,K(T.g)));X=J(c+bf(Ref)*.25+ak(ai,T+H(ad.rr)).a*.1,1);}Y beam(){w j=K(bh(Pos.W,bi(Nor))/128.);j.r+=ad.r/33.;z b=I(j,w(7),.9,2.),f=K(Pos.b/128.-.375);X=J(2.*D(95,85,80)*f*f*f*f*E(1.,b,.5),0.);}Y flame(){w j=K(T),p=j;p.g+=p.g-ad.r;j.r+=sin(p.g*7.)*.2*j.g;z n=I(p+sin(p.gr*a4*9.+w(0,ad.r*9.))*.015+V(p,w(5))*.1,w(13),.4,3.,4),b=U(j-w(.5,.25),w(.05*L(C(.4,.2,j.g)),.1)),m=L(S(b+n*.25,.35));X=C(.0,.4,m)*J(7,.5,.2,0);}Y Generic(){z l=dot(Nor,aH(A(2,0,8)));l=l*.4+.7;w j=bh(Pos,bi(Nor));A c=A(.5);c*=bB(A(K(aC*ad.a+.25),1.,1.));X=J(c*l,1);}Y fixture(){J c=ak(ai,T);X=J(c.W*E(aq(),A(1),c.a),1);}Y dmnd2cjp_m(){J c=ak(ai,T);z r=Q(K(T)-.5);z s=E(.4,8.,K(ad.r*1.5));X=J(c.W*aq()+D(240,130,5)*F(.1,.05,r/s)*C(.37,.32,r),1);}Y Lmapped(){A c=ak(ai,T).W;X=J(c*aq(),1);}Y shiny(){J c=ak(ai,T);c.W*=1.+c.a*bf(Ref);X=J(c.W*aq(),1);}Y timhel(){A d=aH(Pos-Cam.W);d.b=d.b*4.+2.;w j=aH(d).rg*2.;z b=C(.2,1.,I(j-ad.r*w(.1,.2),w(5),.5,2.,6));j.g*=1.5;z s=C(.3,1.,I(j-ad.r*w(.1,.18),w(5),.6,2.,6));X=J(A(b,0,0)+D(80,30,8)*s*s*2.,1);}Y lava(){w j=aj(T/8.,ad.r*.5,2.,.05);z b=I(j,w(7),.9,2.,4);A c=D(91,22,14)*(.2+1.6*b);c=E(c,D(144,44,0),F(.6,.2,I(j,w(3),.7,3.,4)));c=E(c,D(244,144,66)*b*2.,L(F(.55,.25,I(j,w(11),.5,2.,4))));X=J(c*ah(aw(aq())),1);}Y lavaf(){lava();}Y Loading(){X=ak(ai,(.5+T*127.)/128.,2.5);X.W*=.7+.3*V(T,.5/fwidth(T));}Y UI(){X=ak(ai,T)*Clr;}";

// src/demo/data/shaders/vertex_shaders.glsl: 2289 => 1439 (62.9%)
const char g_vertex_shaders[] =
"#define c void\n"
"#define e location\n"
"#define f gl_Position\n"
"uniform mat4 MVP;uniform vec4 Time,Cam;layout(e=0)in vec4 P;layout(e=1)in vec4 T;layout(e=2)in vec3 N;layout(e=3)in vec4 C;out vec3 Pos,Nor,Ref;out vec2 UV,LUV;out vec4 Clr;c Generic(){f=MVP*P;Pos=P.rgb;Nor=N;UV=T.rg;LUV=T.ba;Ref=normalize(reflect((P-Cam).rgb,N));}c d(){f=P;UV=P.rg*.5+.5;}c UI(){f=vec4(2.*P.r-1.,1.-2.*P.g,1,1);UV=T.rg;Clr=C;}c cmet52(){d();}c dmnd2c(){d();}c dmnd2cow(){d();}c dmnd2cjp(){d();}c dmnd2pnt(){d();}c lpdmnd(){d();}c ptrshn(){d();}c mtlfw10(){d();}c mtlfw15(){d();}c mtlfw15ow(){d();}c mtlfb3(){d();}c mtlt12f(){d();}c mtlt6f(){d();}c mtlbk03(){d();}c gmtlbg6(){d();}c glrgbk3b(){d();}c gblks15(){d();}c gtprst3(){d();}c skcpthrt(){d();}c gskull4(){d();}c gmtlspsld(){d();}c gmtlsp4b(){d();}c gspbdrbb(){d();}c gkarntwr4a(){d();}c gkarntwrst(){d();}c giron01e(){d();}c giron01nt3(){d();}c gxstrtop4(){d();}c gwdclg1a(){d();}c gwdclg1bd(){d();}c bmtsprt(){d();}c cable(){d();}c brdr11b(){d();}c blt414k(){d();}c light5(){d();}c lt2(){d();}c gpntgmlt1k(){d();}c icon(){d();}c q3bnr(){d();}c Loading(){d();}c Lmapped(){Generic();}c mtlfw15ow_m(){Generic();}c dmnd2cjp_m(){Generic();}c dmnd2pnt_m(){Generic();}c lpdmnd_m(){Generic();}c fixture(){Generic();}c beam(){Generic();}c flame(){Generic();}c q3bnr_m(){Generic();}c shiny(){Generic();}c timhel(){Generic();}c lavaf(){Generic();}c lava(){Generic();f+=MVP[2]*sin(Time.r*.5+dot(P.rgb/1e2,vec3(1)))*4.;}";
