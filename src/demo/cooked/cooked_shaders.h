#pragma once
// auto-generated, do not modify (see cook_shader.js)

// trim_newlines       : true
// consistent_floats   : false
// rename_ids          : true
// rename_vec_fields   : true
// rename_globals      : true
// min_macro_savings   : 8

// src/demo/data/shaders/fragment_shaders.glsl: 50029 => 22148 (44.3%)
const char g_fragment_shaders[] =
"#define A vec2\n"
"#define B float\n"
"#define D vec3\n"
"#define E return\n"
"#define I mix\n"
"#define M fract\n"
"#define O abs\n"
"#define P vec4\n"
"#define S length\n"
"#define T max\n"
"#define U min\n"
"#define V rgb\n"
"#define W UV\n"
"#define X int\n"
"#define aa FCol\n"
"#define ac Time\n"
"#define ad void\n"
"#define aj Texture0\n"
"#define ak for\n"
"#define am texture\n"
"#define aw dot\n"
"#define ay floor\n"
"#define a3 sqrt\n"
"#define aJ normalize\n"
"uniform P ac,Cam;uniform sampler2D aj,Texture1;in D Pos,Nor,Ref;in A W,LUV;in P Clr;out P aa;\n"
"#define aX(x)((x)*(x)*(3.-2.*(x)))\n"
"#define L(x)(x)*(x)\n"
"#define b6(x)aw(x,x)\n"
"#define an(x)clamp(x,0.,1.)\n"
"#define J(r,g,b)(D(r,g,b)/255.)\n"
"B aB=3.1415927,b7=2.*aB,aL=1.618034;A b8(B i){B G=1.324718;E M(.5+i/A(G,G*G));}B aC(B i){E M(.5+i*aL);}B b9(B f){B i=ay(f);E I(aC(i),aC(i+1.),aX(f-i));}B aM(A v){E U(v.r,v.g);}B aM(D v){E U(v.r,U(v.g,v.b));}B aM(P v){E U(U(v.r,v.g),U(v.b,v.a));}B a6(A v){E T(v.r,v.g);}B a6(D v){E T(v.r,T(v.g,v.b));}B a6(P v){E T(T(v.r,v.g),T(v.b,v.a));}B aN(A v){E v.r+v.g;}B aY(B a,B b){E O(a)<O(b)?a:b;}B aZ(B x,B s){E O(x)-s;}B aR(B x,B s){E sign(x)*T(0.,O(x)-s);}A bA(A v){B l=aw(v,v);E l>0.?v/a3(l):v;}B C(B bB,B bC,B x){E 1.-an(O(x-bB)/bC);}B F(B ba,B bD,B x){E an((x-ba)/(bD-ba));}B C(B a,B b,B c,B x){E U(F(a,b,x),F(c,b,x));}A ae(B x){E A(sin(x),cos(x));}mat2 az(B x){A v=ae(radians(x));E mat2(v.g,v.r,-v.r,v.g);}A ah(A z,B p,B s){E z+sin(z.gr*aB*p)*s;}A ah(A z,B t,B p,B s){E z+sin(z.gr*aB*p+t)*s;}B aS(B v,B m){E m-O(v-m);}A aS(A v,B m){v.r=aS(v.r,m);E v;}A bc(A z,A s){z.r+=ay(z.g*s.g)*(.5/s.r);E M(z)*s;}D aD(A z,B r){E D(z-=clamp(z,r,1.-r),S(z)/r);}D aD(A z,A s,B r){s=s.gr/aM(s);z*=s;E D(z-=clamp(z,A(r),s-r),S(z)/r);}B H(A p){D q=M(p.rgr*.09153);q+=aw(q,q.gbr+19.19);E M((q.r+q.g)*q.b);}B H(B p){p=M(p*.1031);p*=p+33.33;p*=p+p;E M(p);}D bX(B p){D ao=M(D(p)*D(.1031,.1030,.0973));ao+=aw(ao,ao.gbr+33.33);E M((ao.rrg+ao.gbb)*ao.bgr);}A bE(A p){D ao=M(D(p.rgr)*D(.1031,.1030,.0973));ao+=aw(ao,ao.gbr+33.33);E M((ao.rr+ao.gb)*ao.bg);}P bF(B p){P aq=M(P(p)*P(.1031,.1030,.0973,.1099));aq+=aw(aq,aq.abrg+33.33);E M((aq.rrgb+aq.gbba)*aq.bgar);}P bF(A p){P aq=M(P(p.rgrg)*P(.1031,.1030,.0973,.1099));aq+=aw(aq,aq.abrg+33.33);E M((aq.rrgb+aq.gbba)*aq.bgar);}B af(B x,B p){E H(mod(x,p));}B N(B x){B i;E I(H(i=ay(x)),H(i+1.),aX(x-i));}B Z(B x,B p){B i;E I(af(i=ay(x),p),af(i+1.,p),x-i);}B af(A p,A s){E H(mod(p,s));}B Z(A p,A s){p*=s;A i=ay(p);p-=i;p*=p*(3.-2.*p);B bG=af(i+A(0,0),s);B bH=af(i+A(0,1),s);B bI=af(i+A(1,1),s);B bJ=af(i+A(1,0),s);E I(I(bG,bJ,p.r),I(bH,bI,p.r),p.g);}B K(A p,A a0,B aE,B aF,X aT){B aG=Z(p,a0),a4=1.,tw=1.;ak(X i=0;i<aT;++i){p=M(p+aL);a0*=aF;a4*=aE;aG+=Z(p,a0)*a4;tw+=a4;}E aG/tw;}B K(A p,A a0,B aE,B aF){E K(p,a0,aE,aF,4);}\n"
"#define a5(v)C(.5,.5,v)\n"
"B bd(A p,A a0,B aE,B aF,X aT){B aG=a5(Z(p,a0)),a4=1.,tw=1.;ak(X i=0;i<aT;++i){p=M(p+aL);a0*=aF;a4*=aE;aG+=a5(Z(p,a0))*a4;tw+=a4;}E aG/tw;}A aO(A p,A a,A b){A ab=b-a,ap=p-a;B t=an(aw(ap,ab)/aw(ab,ab));E ab*t+a;}B Y(A p,A b){A d=O(p)-b;E U(T(d.r,d.g),0.)+S(T(d,0.));}B aH(A p,A b){E a6(O(p)-b);}B al(A p,B r){E S(p)-r;}B aU(A p,A r){E al(p/r,1.)/U(r.r,r.g);}B aP(B a,B b){E T(a,-b);}B be(B a,B b,B k){B h=an(.5+0.5*(b-a)/k);E I(b,a,h)-k*h*(1.-h);}A bf(B x){A d=A(dFdx(x),dFdy(x));E d/T(S(d),1e-8);}B R(B s,B d){E an(1.-s/d);}B R(B s){E an(1.-s/fwidth(s));}\n"
"#define aV(bK,z,bL){A p[3];B r[3];p[0]=z;p[1]=z+dFdx(z);p[2]=z+dFdy(z);ak(X i=0;i<3;++i)r[i]=bL;bK=D(bA(A(r[1],r[2])-r[0]),r[0]);}\n"
"P bh(A z,B s){E P(z/=s,a3(an(1.-b6(z))),S(z)-1.);}B bM(D n){B l=aN(n.gb)*.7;E pow(an(l),4.)+l;}B bi(A z,B s){z/=s;z.g+=.06;z.r*=2.;E F(.3,.0,S(z));}D aI(D c,A z,B s){P b=bh(z,s);c*=1.+bM(b.V)*R(b.a)*.5;c*=1.-L(bi(z,20.*s))*(1.-R(b.a))*.3;E c;}D bj(A p,B ae,B bN){D e=D(-1,0,1),r=D(1e5);A ar=ay(p*ae),bY=e.gg;p-=(ar+.5)/ae;B ag=.5*af(ar+e.gg,A(ae)),a7=.5*af(ar+e.rg,A(ae)),a8=.5*af(ar+e.gb,A(ae)),a9=.5*af(ar+e.bg,A(ae)),aA=.5*af(ar+e.gr,A(ae)),bk=.5*af(ar+e.rb,A(ae)),bl=.5*af(ar+e.bb,A(ae)),bm=.5*af(ar+e.br,A(ae)),bn=.5*af(ar+e.rr,A(ae));A[4]au,l;if(mod(ar.r+ar.g,2.)<.5){l[0]=1.+A(aA-a7,ag-bn);l[1]=1.+A(a9-aA,ag-bm);l[2]=1.+A(a8-a7,bk-ag);l[3]=1.+A(a9-a8,bl-ag);au[0]=A(aA,ag);au[1]=A(aA,ag);au[2]=A(a8,ag);au[3]=A(a8,ag);}else{l[0]=1.+A(ag-bn,a7-aA);l[1]=1.+A(bm-ag,a9-aA);l[2]=1.+A(ag-bk,a8-a7);l[3]=1.+A(bl-ag,a8-a9);au[0]=A(ag,a7);au[1]=A(ag,a9);au[2]=A(ag,a7);au[3]=A(ag,a9);}ak(X i=0;i<4;i++){au[i]+=l[i]*(A(i&1,i/2)-.5);l[i]/=ae;B bx=aH(p-au[i]/ae,l[i]/2.-bN/ae);if(bx<r.r)r=D(bx,ar+au[i]);}E r;}A bo(A p,A bp){p*=bp;A n=ay(p),f=p-n,bq,g,o,r;B bs=8.0,d;ak(X i=0;i<9;++i){g=A(i%3-1,i/3-1);o=bE(mod(n+g,bp));r=g+o-f;d=aN(O(r));if(d<bs){bs=d;bq=r;}}E bq;}B bt(D p){p=aJ(p);D a=mod(degrees(atan(p,p.gbr)),360.);E Z(a.r/8.,45.)*F(.9,.0,O(p.b))+Z(a.g/8.,45.)*F(.7,.0,O(p.r));}A bu(D p,X ax){E(ax==0)?p.gb:(ax==1)?p.rb:p.rg;}X bw(D n){n=O(n)+D(.01,.02,.03);B m=a6(n);E(m==n.r)?0:(m==n.g)?1:2;}D bO(D c){D V=an(O(mod(c.r*6.+D(0,4,2),6.)-3.)-1.);V*=V*(3.-2.*V);E c.b*I(D(1.),V,c.g);}D av(){D d=Cam.V-Pos;B b=K(d.rg/256.*az(Cam.a),A(3),.7,3.,4),l=1.-F(14.,-6.,S(d.rg)-b*8.)*F(128.,48.,d.b)*step(.1,Nor.b);E am(Texture1,LUV).V*2.*l;}\n"
"#define Q(a1)D a1(A);ad a1(){aa=P(a1(W),1);}D a1(A z)\n"
"#define as(a1)P a1(A);ad a1(){aa=a1(W);}P a1(A z)\n"
"Q(cmet52){B b=K(z,A(5),.9,3.,4);D c=I(J(48,41,33),J(103,101,104),b);E c;}Q(ptrshn){B b=K(z,A(3),.9,3.,4);D c=I(J(49,45,43),J(81,75,78),b*b);E c;}Q(dmnd2c){B b=K(z,A(7),.9,3.);z.r*=-1.5;z.g+=z.r*.5;z.r=1.-z.r+z.g;z=M(z*28.);B f=an(1.-S(.1-z));f*=F(.6,.2,S(.6-z));f*=F(.6,.8,S(.1-z));f*=F(.2,.6,b)*2.+1.;B l=1.-F(.2,b+2.,a6(O(z-.5)));E D((f+1.)*I(.21,.29,b*b)*l);}Q(dmnd2cow){B b=K(z,A(7),.9,3.);D c=dmnd2c(z);B r=S(z-.5);c=I(c,c*J(70,61,53),F(.5,.2,r+b*b*b));E c;}B by(A z,B s){B d=1e6,i=0.;ak(;i<5.;++i){A p=A(0,-s)*az(i*72.);d=U(d,S(z-aO(z,p,p*az(144.))));}E d;}as(dmnd2pnt){D c=dmnd2cow(z);z=M(z)-.5;B b=K(z,A(3),.9,3.),d=U(O(S(z)-.4),by(z,.35));E P(c,R(d-.02+b*.02,.01));}ad dmnd2pnt_m(){P c=am(aj,W);aa=P(c.V*av()+J(111,55,0)*c.a*(sin(ac.r*aB)*.5+.5),1);}Q(dmnd2cjp){B b=K(z,A(7),.9,3.,4);D c=dmnd2c(z);B r=S(z-.5);B m=F(.46,.45,r);B l=1.5-1.5*F(.0,.3,r*r);l=I(l,2.5,C(.42,.07,r));l=I(l,3.5,C(.44,.05,r));l=I(l,2.6,C(.36,.03,r));B n=.3+.2*F(.35,.30,r);l*=1.-n*F(.3,.7,b);l*=1.-.3*L(F(.13,.05,r));l=I(l,2.5,F(.04,.01,r));l-=l*C(.03,.01,r)*.7;c=I(c,J(68,66,54)*l,m);c*=1.-L(C(.34,.02,r));c*=1.-L(C(.46,.03,r));c*=1.-C(.41,.03,r)*.7;E c;}A bP(A z,B s){E A(1.-S(z)/s,R(S(z)-s));}as(lpdmnd){B b=K(z,A(5),.9,3.),t,o,k,r;D c=dmnd2c(z);A u,v;u.r=O(z.r-.5);u.g=U(z.g,.4);r=S(u-A(0,.4))-(.18-.06*F(.4,1.,z.g));k=.25-.15*F(.9,.96,z.g)+.03*L(F(.82,.86,z.g))+.07*F(.8,.2,z.g)+.07*L(F(.35,.22,z.g))-.07*F(.22,.0,z.g);o=Y(z-A(.5,.5),A(k,.46));o=T(o,-Y(u,A(.15,.03))+.06);c=I(c,D(.6,.55,.55)-z.g*.3+b*.2,R(o));c*=1.-.7*C(.0,.013,o);c*=1.-(r/.5-.1)*R(o);t=T(r,z.g-.96);o=O(t-.02)-.03;o=T(o,z.g-1.+u.r*.5);o=T(o,z.g-.96);c=I(c,D(1,1,.9)-z.g*.55,C(-.01,.01,o));c=I(c,D(.2*b+.1),R(t,.01));c*=1.-.2*C(.0,.05,t)*R(o);v=bP(u=z-A(.5,.4),.02);c*=1.+J(111,80,70)*C(.03,.01,S(u));c*=1.-.5*C(.02,.01,S(u));c=I(c,J(111,66,44)*(v.r*1.5+.2),v.g);E P(c,R(t-.03,.02));}ad lpdmnd_m(){P c=am(aj,W);A z=M(W);z.r=O(.5-z.r);B t=M(-ac.r),r=S(z-A(0,.4)),l=t*pow(T(0.,1.-r),4.)*c.a;if(t>.75)l+=F(.03,.01,O(M(z.g+z.r*.5+t*2.)-.45))*F(.1,.08,z.r);aa=P(c.V*av()+J(180,150,5)*l,1);}Q(mtlfw10){B b=K(z,A(5),.9,3.,4);D c=I(J(44,14,16),J(93,63,63),b*b);E c;}D bz(A z){B e=3e-3,a=0.;A g=A(6),r=bo(z,g);ak(X i=0;i<9;++i)a+=aN(O(bo(A(i%3-1,i/3-1)*e+z,g)-r));E D(z+r.rg/g,a);}Q(mtlfw15){B b=K(z,A(3),.9,3.,4);D c=I(J(80,70,72),J(128,120,120),b*b);D v=bz(z);c*=I(.95,1.1,Z(v.rg,A(6)));c=I(c,J(168,128,120),F(.5,1.,v.b)*b*.7);E c;}as(mtlfw15ow){B b=K(z,A(3),.9,3.,4);D c=I(J(80,70,72),J(128,120,120),b*b);D v=bz(z);B m=F(.5,1.,v.b);B r=F(.4,.2,S(.5-M(v.rg)));c*=I(.95,1.1,Z(v.rg,A(6)))-2.*r*b*b;c=I(c,J(168,128,120),m*b*.7);E P(c,m*r);}ad mtlfw15ow_m(){P c=am(aj,W);aa=P(c.V*av()+C(.5,.125,M(W.g*.5+ac.r*.5))*c.a*.3,1);}Q(mtlfb3){B b=K(z,A(5),.9,3.,4);D pt=bj(z,8.,.31);D c=I(J(66,58,55),J(118,107,105),b);B l=1.-.5*F(.034,.036,pt.r);l=I(l,1.4,C(.033,.004,pt.r));E c*l;}B bQ(A z){B b=Z(z,A(64)),f=0.,d=1e6;ak(;f<11.;++f)d=be(d,O(S(.5-O(z-b8(f)))-I(.36,.29,aC(f+.7)))-I(.015,.03,b),.01);E d*1e2;}D b0(A z){D s,p;ak(X i=0;i<3;++i){p=D(z,0);p[i]+=1e-4;s[i]=bQ(p.rg);}E D(aJ(s.rg-s.b),s.b);}Q(mtlt12f){B b=K(z,A(5),.9,3.,4),l;D c=I(J(51,46,43),J(165,147,143),b*b),d=b0(z);l=1.-.5*(d.g-d.r)*C(.5,3.,d.b)*F(1.,.0,d.b);E c*l*.8;}Q(mtlt6f){B b=K(z,A(3),1.1,3.,4),l;D c=I(J(51,46,43),J(165,147,143),b*b),d=b0(z);l=1.-.5*(d.g-d.r)*C(.5,3.,d.b)*F(1.,.0,d.b);E c*l;}Q(mtlbk03){B b=K(z,A(5),.9,3.,4),l=.18*(.7+b*b);D g;z=ah(z,13.,.007);aV(g,z,L(F(.3+b*.2,.9,K(p[i],A(23),.5,2.,4))));E D(l*(1.-g.g*g.b));}Q(giron01e){B b=K(z,A(5),.9,3.,4);D c=I(J(77,55,53),J(62,48,48),Z(z,A(128,13)))*(.7+b*b),g;z=ah(z,13.,.007);aV(g,z,L(F(.4+b*.4,.95,Z(p[i],A(63,43)))));c*=F(1.3,.9,g.b);E D(c*(1.+g.g*g.b));}B b1(A z,A s){z.g=T(z.g,0.);E aU(z,s);}D aQ(D c,D b,A z,B h,B s){B y=(z.g-h)/s,p=1.-y*y;c*=1.-C(-1.,1.,y);if(p>0.)c=b*(p*(.8+.2*C(.5,.25,M(z.r/s))))*(.7+L(C(.2,.7,y)));E c;}D bR(A z,B n){E D(n*n*.4);}Q(giron01nt3){z.r*=.5;B b=K(z*A(2,1),A(3,5),.9,3.,4),n=.75+b*b,t=z.g+.2*U(.4,C(.5,.33,M(z.r*4.))),bS=b1(z-A(.25,.62),A(3,2)/32.),aK=b1(z-A(.25,.55),A(3,2)/48.),r;D c=I(J(66,50,51),J(111,66,44),a3(C(.31,.01,z.g))),ai;A p=z,q;p.r=M(p.r*4.);if(z.g>.3)c=aI(c,A(4.*O(p.r-.5)-1.6,M(z.g*16.)-.5),.07);r=O(p.r-.5);c*=1.-.3*F(.31,.32,z.g)*F(.87,.86,z.g)*(F(.035,.03,.5-r)+C(.48,.01,r)-C(.46,.02,r));c=I(c*n,bR(z,b),T(F(.31,.3,z.g),R(aK)));c*=F(1.5,.7,z.g);if(z.g<.306)c*=1.-C(.3,.05,z.g)*R(-aK+10.,20.);c*=1.-C(.316,.004,z.g)*R(-aK);if(z.g<.1)c*=.0;q=z;q.g+=C(.1,.01,mod(q.r,.33))/2e2;c=aQ(c,2.*b*J(93,84,79),z,.185,.015);c=aQ(c,2.*b*J(138,77,48),z,.13,.025);c=aQ(c,2.*b*J(112,71,51),z,.09,.015);c=aQ(c,2.*b*J(138,77,48),q,.05,.015);p.r=O(M(z.r*6.-.5)-.5)/6.;c*=1.+.5*F(.04,.03,p.r)*C(.18,.03,p.g);r=aH(p-A(0,.12),A(.03,.01));r=aP(r,aH(p-A(0,.11),A(.01)));c*=1.-L(C(.0,.04,r));c=I(c,J(166,99,77)*2.*b*(.75+.5*L(C(.125,.01,z.g))),R(r));q=p;q.g-=.07;r=al(q,.03);c*=1.-L(C(.0,.07,r));c=I(c,J(127,83,72)*b*2.*F(.01,-.005,r),F(.005,.0,r));q.g-=.004;r=al(q,.015);c*=L(F(-.01,.01,r));q.g+=.013;r=al(q,.05);c+=J(67,38,30)*4.*a3(b)*L(C(-.02,.015,r)*C(.023,.02,z.g));r=aP(bS,aK);r=aP(r,(z.g-.3)*3e2);c*=1.-.5*C(-2.,17.,aK)*F(.26,.3,z.g);ai=J(67,39,17)*n;ai=I(ai,D(n*.2),C(0.,4.,r)*b);ai*=1.-.4*pow(C(.0,3.,r),4.);ai+=(ai+.6)*a3(b)*L(C(-6.,8.,r)*C(.66,.04,z.g))*R(r);if(z.g<.55)ai=aI(ai,A(24.*O(z.r-.25)-1.85,M(z.g*24.+.5)-.5),.15);c=I(c,giron01e(z),F(.85,.9,t)+step(z.g,1./256.));c*=1.+C(.88,.015,t)-L(C(.87,.03,t));E I(c,ai,F(1.,.1,r));}D bT(D c,D k,A z,X w,X h){B b=K(z,A(w,h),.5,2.,2);c*=.9-.3*F(.15,.1,O(b-.5));E I(c,k,C(.5,.1,b));}Q(gmtlbg6){z=ah(z,9.,.005);X i=0,l[]=X[](13,43,17,47,23,59,27,63);B b=K(z,A(19),.7,2.,4);D c=I(J(40,50,60),J(46,33,27),b)*(.5+b);ak(;i<8;i+=2)c=bT(c,I(J(145,140,137),J(132,123,116),b),z,l[i],l[i+1]);E c;}D bU(D c,D k,A z,X w,X h){B b=K(z,A(w,h),.5,2.,2);c*=1.-.15*L(F(.15,.1,O(b-.5)));E I(c,k,C(.5,.1,b));}Q(gblks17f2){B b=K(z,A(13),.9,3.,4),n=K(z,A(7),.9,3.,4);D c=I(J(111,66,55),J(80,55,52),L(F(.8,.2,n)))*(.8+.8*b*b),k=c;z=ah(z,13.,.01);X i=0,l[]=X[](13,43,17,47,23,59,27,63);b=K(z,A(19),.7,2.,4);ak(;i<6;i+=2)c=bU(c,k,z,l[i],l[i+1]);E c;}D bV(D c,D k,A z,X w,X h){B b=K(z,A(w,h),.5,2.,1);c*=.9-.3*L(F(.15,.1,O(b-.5)));E I(c,k,C(.5,.1,b));}Q(gkarnclma2r){B b=K(z,A(3,29),.9,2.,4),t=.8+.8*b*b,d=O(z.g-.61),o=F(.25,.24,d),m;D c=J(140,127,127),k=c;A p=z;c*=1.-.1*F(.85,.86,z.g);c=t*I(c,J(110,55,50),F(.33,.32,z.g));p.g+=p.r*.11+b*.007;p.g=M(p.g*9.)-.5;m=F(.0,.1,O(p.g)-.2);X i=0,l[]=X[](3,29,5,37,9,63,27,63);ak(;i<6;i+=2)c=I(c,bV(c,k,z,l[i],l[i+1]),m*o);c*=1.+t*o*(+.6*C(.1,.1,p.g)-.7*C(-.25,.3,p.g)-.5*C(.2,.1,p.g));c=I(c,J(99,66,51)*t,C(-.15,.1,p.g)*o);c*=1.+C(.36,.005,z.g)+C(.34,.005,z.g)+C(.865,.005,z.g)+C(.89,.01,z.g)-.5*L(C(.245,.01,d))-.7*L(C(.35,.01,z.g))-.5*L(C(.325,.02,z.g))-.8*L(C(.875,.02,z.g))-.3*L(C(.9,.02,z.g));c*=.3+a3(a5(z.r));E c;}Q(glrgbk3b){B b=K(ah(z,5.,.02),A(5),1.,3.,5),n=Z(z,A(13));A p=bc(z,A(8)),q=M(p),a2=p-q;D c=J(91,61,42)*(.8+.8*b*b);c=I(c,J(70,30,15)*(.8+.8*b*b),aD(q,.1).b*.3);c*=1.-L(aD(q,.01+b*.05).b)*n*b*b;c*=1.+C(.4,.3,aD(q,.01+b*.07).b)*a3(b)*.3;c*=.9+.2*H(a2)*(1.-aD(q,.1).b);c*=.9+.4*pow(bd(z-H(a2/8.),A(5),.6,2.,4),4.);E c;}Q(gblks15){B b=K(z,A(5),.9,3.,4),t=bd(ah(z,4.,.01),A(7),.5,3.,5),n=Z(ah(z,4.,.05),A(9)),a2,e;D pt=bj(z,4.,.1+n*t*.05),c;A d=bf(pt.r);a2=H(M(pt.gb));c=J(74,65,62)*(.8+.8*b*b);c+=C(.6,.3,n)*F(.3,.9,b*t)*.2;c*=1.-C(.5,.4,n)*F(.5,.7,t)*.1;c=I(c,J(86,74,78),C(.5,.1,b)*C(.7,.3,a2)*.7);c=I(c,J(105,90,70),C(.3,.1,t)*C(.3,.3,a2)*.3);e=C(.015,.005+.015*n,pt.r)+C(.4,.1,n*t)*.4;c*=1.-b*F(.015,.05,pt.r)*.7;c*=1.+e*b*(d.g-.5)*.7;c*=.9+.2*a2;c*=.9+.2*a5(Z(z-pt.gr,A(5)));E c;}Q(gblks18c){B b=K(z,A(13,1),.7,2.,3);D c=gblks15(z)*.7;c*=1.-L(F(.4,1.,b));E c;}Q(gklblki){B b=K(z,A(5),.9,3.,4),n=K(z,A(31,3),.5,3.,3),t=.75+b*b,d,o,i;A p=z;D c=gblks15(z);if(z.g>.38)E c;c=I(J(92,43,15),J(66,44,33),F(.1,.05,z.g))*t*(.5+.5*F(.0,.35,z.g));c+=L(C(.32,.015,z.g))*b+.3*b*C(.34,.05,z.g);c*=1.-C(.38,.01+b*b*.03,z.g)+3.*C(.15,.2,z.g)*(n-.5);p.r=mod(p.r,1./7.)-.07;p.g-=.21;d=al(A(.75*p.r,aR(p.g,.1)),.033);o=R(d,.005);d=al(A(.75*p.r,aR(p.g+.005,.09)),.033);i=R(d+.015);c=I(c,J(83,81,66)*t,(o-i)*F(.1,.3,z.g));c*=1.-F(.17,.25,z.g)*i;c+=L(C(.0,.015,d))*C(.32,.03,z.g);c*=1.+3.*pow(C(-.01,.03,d),4.)*C(.09,.03,z.g);d=al(A(.75*p.r,aR(p.g+.03,.1)),.033);c*=1.-R(d+.01,.02)*(1.-o);if(z.g>.09&&z.g<.3)c=aI("/*continued on next line*/
/*cont.*/"c,A((O(p.r)-.035)*36.,M(z.g*36.)-.5),.1);E c;}as(gcntr2trn){B b=K(z-=.5,A(5),.9,3.,4),t=.75+b*b,n=Z(ah(z,7.,.02),A(17)),r=S(z),k=r>.4?38.:r>.32?28.:16.,a=M(atan(z.g,z.r)/b7),i=ay(a*k),at=O(O(r-.41-n*.002)*1e2-6.),m=F(1.5,1.4,at),aW[]=B[](1.,3.,-.145,-1.,2.,.166),d,b2,s;A p=z;D c=J(78,68,63);c*=1.+.5*L(C(.49,.005+.015*n*n+.015*b,r));c=I(c,J(83,52,47)*(.6+.4*n*n),m)*t;c*=1.-.5*C(1.5,.5,at)+b*C(1.,.5+.5*n,O(r-.418)*1e2-5.)-b*C(.5,.08,M(a*k+.5))*m+b*C(.5,.1,M(a*k+.55))*m;m=F(.34,.33,r);c=I(c*(1.-.5*m),J(83,52,47)*t,n*b*m);c=I(c,J(112,86,31)*t,m*L(C(.1,.15,.45,b)));c=I(c,J(77,66,77)*t,m*F(.5,.8,b)*.5);c*=1.-.7*C(.27,.34,.35,r);at=r+n*.004;m=r>.21&&r<.31?1.:0.;c*=1.-C(.325,.005,at)-C(.31,.005,at)-b*L(C(.29,.005,at))-b*L(C(.23,.01,at))-.5*L(C(.21,.02,at))+L(C(.3,.01,at))*b+L(C(.22,.01,at))*b-b*C(.5,.07,M(a*k+.5))*m;if(r<.23)i+=37.;if(r<.31)i+=73.;if(r<.31)i+=91.;c*=I(1.,.9+.2*aC(i),m);m=F(.01,.0,O(r-.411)-.039);i=ay(a*72.);p*=az(i*5.);s=0.;d=1e6;X j=0;ak(;j<6;j+=3){d=aY(d,b2=aw(p,aJ(A(aW[j],aW[j+1])))+aW[j+2]);s+=s+B(b2>0.);}if(s==3.)++i;else i+=66.*s;i=aC(i);c=I(c,t*J(90,80,75),m);c=I(c,t*J(127,111,88),i*b*m);c*=I(1.,.7+.6*H(i),m);c*=1.-m*L(C(.0,.006,d))*b+m*L(C(.006,.006,O(d)))*b*.5;i=ay(a*4.);p=O(z*az(i*90.+45.));d=1e6;ak(j=0;j<2;++j,p=O(p*az(45.)))d=aY(d,O(S(p-A(0,.12))-.16));m=F(.21,.2,r);at=aZ(aZ(d,.012),.001);c*=1.-F(.21,.2,r)*R(.012-d)+b*m*L(C(.005,.005,d))-.5*m*L(R(at-.001,.001));E P(c,(1.-F(.21,.15,r)*R(.028-d,.02))*F(.07,.087,r));}as(gcntr2trn_m){A p=M(W)-.5;B b=K(az(ac.r*333.)*p/(.8+.2*sin(ac.r*61.)),A(53),.7,2.,4);P c=P(1.-b*D(0,.3,1),1),ai=am(aj,(az(ac.r*30.)*p/(.8+.2*sin(ac.r*1.26)))+.5);c.V=I(c.V,ai.V,ai.a);ai=am(aj,W);c.V=I(c.V,ai.V,ai.a)*av();E c;}Q(gtprst3){B b=K(z,A(13),.9,3.,4),n=K(z,A(7),.9,3.,4);D c=I(J(60,50,50),J(87,47,37),L(F(.7,.25,n)))*(.7+.8*b*b),g;z=ah(z,31.,.003);aV(g,z,a3(F(.0,.9,Z(p[i],A(93)))));c*=1.-(g.g+.4)*L(b*g.b)*g.b;E c;}Q(skcpthrt){B b=K(ah(z,7.,.01),A(9),.7,2.,4);D c=J(127,70,55)*(.85+.3*b);c*=1.-.2*L(F(.2,.05,b*b));c*=1.+.3*F(.6,.9,b);c*=1.-.2*L(C(.6,.3,K(ah(z,5.,.03),A(6),.6,2.,4)));E c;}Q(gskull4){B b=K(z,A(13),.9,3.,4);D c=J(60,50,46)*(.875+b*b);E c;}Q(gmtlspsld){B b=K(z,A(7),.9,3.,4),n=K(z,A(5),.9,3.,4);D c=I(J(103,56,53),J(73,58,71),smoothstep(.4,.5,n))*(.75+b*b);E c;}Q(gmtlsp4b){B b=K(z,A(13),.9,3.,4),n=Z(ah(z,5.,.05),A(9)),d=a5(M(z.r*4.)),m=F(.1,.15,d)*F(1.,.99,z.g);D c=J(51,44,44);c=I(c,J(73,55,52),F(.2,.2,b)*n*m);c=I(c,J(69,60,66),F(.7,.1,b)*b*m);c=I(c,J(99,77,77),F(.1,.5,n)*n*m*b*b*.3);c*=.6+.3*b+.3*b*b;c*=1.+.9*L(C(.21,.02+.1*n,d+b*.05))*m*b;c*=1.-L(F(.49,.5,O(z.g-.5)));c*=1.-F(.05,.2,d)*F(.16,.1,d);c*=1.+C(.99,.007,z.g);E aI(c,A(d-.4,M(z.g*8.)-.5),.07);}D b3(A z,B s){B b=K(z,A(3,1.+s+s),.7,2.,4),d=a5(z.r),m;z.g*=2.;D c=I(J(71,60,58),J(110,88,77),F(.1,.05,d))*(.7+.6*b);c*=1.-F(.05,.0,z.r)*(1.-b*b);c*=1.+.5*C(.05,.02,z.r);A p=A(d-.35,M(z.g*s)-.5);P k=bh(p,.11);m=R(k.a);c*=1.-.7*bi(p,1.1)*(1.-m);c=I(c,(k.g>.0?J(128,105,88):J(200,111,66)*F(-.2,.7,k.b))*(.4+2.*b*pow(an(aN(k.gb*.7)),4.))*(1.-.6*C(-.1,.4,k.g)),m);E c;}Q(gspbdrbb){E b3(z,4.);}Q(gkarntwr4a){E gspbdrbb(z.gr);}Q(gkarntwrst){E b3(z,1.);}Q(gxstrtop4){B b=K(z,A(40,5),.9,3.,4);D c=J(110,110,98)*(.8+.8*b*b);if(z.g<1./4.)c*=.5;c*=1.-.4*F(.4,.0,b)+.5*F(.02,.0,z.g)+.2*C(.24,.01,z.g);E c;}Q(gwdclg1a){A p=z,q;p.g*=22.;q=M(p);B b=K(z,A(3,23),1.,2.,6),n=K(z,A(3,33),.7,3.,4),a2=H(p.g-q.g);D c=J(92,67,53)*(.8+.8*b*b);c*=1.-L(F(.1,.0,U(q.g,1.-q.g)))*b;c*=1.-.2*smoothstep(.3,.7,n);c*=.8+.3*b*a2;E c;}Q(gwdclg1bd){B b=K(z,A(13),.9,3.,4),x=z.r*16./3.;D c=gwdclg1a(z)*F(.15,.21,z.r);if(x<1.)c=J(59,48,49)*(.7+.6*b);c*=1.+.5*C(.05,.05,a5(x));E aI(c,A(O(z.r-3./32.)-.07,mod(z.g,.1)-.05),.004);}Q(gsltrfc){A p=bc(z,A(6,4)),q=M(p),u=q;B b=K(ah(z-=.5,5.,.03),A(13),.9,2.,3),n=Z(z,A(73,7)),t=(.75+b*b)*(.8+.4*b9(z.r*93.)),r;D c=D(.25*t);u.g+=u.g*2.-.01-.03*n;r=S(u-=clamp(u,A(.49,.5),A(.51,3)));c*=1.-.7*b*L(F(.07,.03,O(r-.5)))+.5*b*C(.35,.1,r)*L(F(.2,.1,q.g))-.3*L(F(.8,1.,q.g))-.3*(F(.3,.1,q.g))*F(.4,.6,r)+.2*L(F(.5,.1,q.g))*F(.45,.4,r);E c;}Q(cable){B b=K(z,A(5),.9,3.,4),h=M(z.g*10.);D c=I(J(53,48,42),J(38,38,36),b);c*=.6+b*.8;c*=1.-.5*L(C(.5,.5,h));c*=1.+.5*L(C(.25,.25,h));c*=1.+.5*L(C(.65,.35,h));E c;}Q(bmtsprt){B b=K(z,A(7,3),.9,3.,4),h=z.g+b*.04,l=1.-.15;D c=I(J(59,48,40),J(110,108,102),b*b);l=I(l,.5,C(.34,.05,z.g));l=I(l,.5,F(.08,.05,O(z.g-.7)));l=I(l,.3,C(.7,.03,z.g));l=I(l,1.5,C(.01,.03,z.g));l=I(l,2.2,C(.89,.1,h));l=I(l,1.6,F(.07,.04,O(z.g-.44)));l=I(l,2.5,C(.5,.04,h));l=I(l,1.7,C(.18,.04,h));E c*l;}Q(brdr11b){B b=K(z,A(5,3),.9,3.,4);D c=I(J(74,66,55),J(99,90,78),b*b);z.r*=2.;A p=aO(z,A(.5,.625),A(1.5,.625));B d=S(p-z),m=F(.22,.20,d),l=1.-.15*m;l=I(l,.5,F(.7,.9,z.g)*m);l=I(l,1.-bf(d).g*.5,C(.22,.04,d));l=I(l,.6,L(C(.19,.05,d)));l=I(l,.5,F(.05,0.,z.g));l=I(l,.5,C(.26,.05,z.g));l=I(l,1.7,F(.93,1.,z.g));l=I(l,1.7,C(.23,.04,z.g));E c*l;}as(blt414k){B b=K(z,A(1,5),.4,3.,4);D c=I(J(56,49,43),J(142,136,136),b);z=.5-O(z-.5);z.g*=4.;B a=C(.0,.1,S(z-aO(z,A(.41,.5),A(.42,3.5)))),d=aM(z),l=1.-.7*T(0.,1.-d/.15);l*=1.-.8*F(.24,.31,U(d,z.g-.1));c+=J(80,80,20)*a;E P(c*I(l,2.7,a),a);}as(light5){B b=K(z,A(1,5),.4,3.,4);D c=I(J(56,49,43),J(142,136,136),b);z=.5-O(z-.5);z.g*=8.;B d=S(z-aO(z,A(.27,.3),A(.27,7.7))),a=C(.0,.17,d),l=1.-.5*C(.17,.07,d);c+=J(80,80,20)*a;E P(c*I(l,2.7,a),a);}as(lt2){A p=O(z-.5);B b=K(z,A(1),.4,3.,4),r=S(p),a=F(.37,.33,r)*(.5+2.*b),l=1.+.0*F(.08,.03,O(r-.41));D c=I(J(56,49,43),J(142,136,136),b);l=I(l,7.,F(.44,.1*b,r));l*=1.-.5*L(C(.46,.04,r));l*=1.-.4*L(C(.36,.04,r));E P(c*l,a);}as(gpntgmlt1k){B b=K(z,A(5),.9,3.,4),d=be(by(z-=.5,.35),O(al(z,.4)),.02),a=pow(R(d-.02,.15),8.),o=U(T(Y(z,A(.46)),-al(z,.51)),O(al(z,.44)));D c=J(76,62,47)*(.8+.8*b*b);c*=1.+(b+.5)*R(O(o)-.01,.01);c*=1.-F(.1,.05,d)*R(al(z,.4));E P(c+1.*D(1,1,.3)*a,a);}B b4(A z){z.r=O(z.r);z.g-=.07;B d=aU(z,A(.31,.12))/50.;d=T(d,-aU(z-A(0,.01),A(.28,.07))/120.);d=T(d,-Y(z-A(.0,.1),A(.22,.12)));d=T(d,-Y(z-A(.0,.1),A(.09,.31)));d=U(d,aH(z-A(.0,-.09),A(C(-.09,.32,z.g)*.04,.32)));d=U(d,aH(z-A(.11,-.21),A(C(-.07,.3,z.g)*.03,.15)));E d;}as(icon){z-=A(.48,.5);B d=b4(z),b=S(z)-.47;D c=1.-D(.5,1,1)*R(T(.007-d,b+.04));E P(c,1)*R(b);}B b5(A z,B s,B i,B bW){i=(z.g-L(O(z.r-.5))*bW)*s-i;E 2.*C(.5,.4,i)*(M(i)-.5);}as(bwprtbnr){B b=K(z,A(5,9),.9,3.,4),t=.8+.8*b*b,n=K(z,A(5,9),.9,3.,2),x=O(z.r-.5),d;D c=J(77,60,44)*t;A p=z*A(1,2)-A(.5,.7);c*=1.-.55*R(aP(al(p,.3),b4(az(45.)*p*.8)-.01));c*=1.+L(F(.6,.9,b))+C(.2,.5,z.g)*C(.2,.3,x)*b5(z,4.,.2,4.);ak(B f=6.;f<9.;++f)c*=1.+C(.8,.5,z.g)*C(.2,.3,x)*b5(z,12.,f,1.);d=z.g-.81-L(an(x*4.))*.09;c=I(c,J(82,66,60)*t,F(.0,.01,d));c*=1.-.5*(C(.01,.02,d))+.5*(C(.02,.01,d));d=.15*(1.-z.g);d=Y(z-.5,A(.49)-d)+n*.1*a3(1.-z.g)-d;E P(c*L(R(d+.01,.05)),R(d));}as(bwprtbnr_m){P c=am(aj,z);if(c.a<.5)discard;c.V*=L(av()*.5);E c;}as(q3bnr){z*=A(256,64);z.g+=2.;B d=al(z-A(81,30),11.);d=T(d,z.r-80.);d=T(d,-al(z-A(84,26),9.));d=U(d,Y(z-A(73,37),A(4,9))-4.);d=T(d,-Y(z-A(73,37),A(0,7))+1.);d=U(d,Y(z-A(91.5,47),A(4,19))-4.);d=T(d,-Y(z-A(91.5,47),A(0,17.5))+1.);d=U(d,Y(aS(z,111.)-A(105.+F(23.,50.,z.g)*3.,43),A(3.5,19)));d=U(d,Y(z-A(111,32),A(4,3)));d=U(d,Y(z-A(126,37),A(3,13)));d=U(d,Y(z-A(125.5+F(23.,50.,z.g)*10.,44),A(3.5,6)));d=U(d,Y(z-A(136.5-F(23.,50.,z.g)*9.,32),A(3.5,8)));d=U(d,Y(z-A(148.5,37),A(7,13)));d=T(d,-Y(z-A(155,33),A(6,3)));d=T(d,-Y(z-A(155,43),A(6,2)));d=U(d,Y(z-A(168,37),A(3.5,13)));d=U(d,Y(z-A(178.,37),A(3.5,13)));d=U(d,Y(z-A(188,37),A(3.5,13)));d=T(d,z.g-50.);E P(R(d,.8),0,0,H(z*511.));}ad q3bnr_m(){D c=am(aj,W*2.).V*step(.5,M(ac.r*.5));c=I(c*av(),D(.5,0,0),C(M(ac.r*2.),1./64.,M(W.g)));aa=P(c+bt(Ref)*.25+am(aj,W+H(ac.rr)).a*.1,1);}ad beam(){A z=M(bu(Pos.V,bw(Nor))/128.);z.r+=ac.r/33.;B b=K(z,A(7),.9,2.),f=M(Pos.b/128.-.375);aa=P(2.*J(95,85,80)*f*f*f*f*I(1.,b,.5),0.);}ad flame(){A z=M(W),p=z;p.g+=p.g-ac.r;z.r+=sin(p.g*7.)*.2*z.g;B n=K(p+sin(p.gr*aB*9.+A(0,ac.r*9.))*.015+Z(p,A(5))*.1,A(13),.4,3.,4),b=Y(z-A(.5,.25),A(.05*L(F(.4,.2,z.g)),.1)),m=L(R(b+n*.25,.35));aa=F(.0,.4,m)*P(5,2,.7,0);}ad Generic(){B l=aw(Nor,aJ(D(2,0,8)));l=l*.4+.7;A z=bu(Pos,bw(Nor));D c=D(.5);c*=bO(D(M(aL*ac.a+.25),1.,1.));aa=P(c*l,1);}ad fixture(){P c=am(aj,W);aa=P(c.V*I(av(),D(1),c.a),1);}ad dmnd2cjp_m(){P c=am(aj,W);B r=S(M(W)-.5);B s=I(.4,8.,M(ac.r*1.5));aa=P(c.V*av()+J(240,130,5)*C(.1,.05,r/s)*F(.37,.32,r)"/*continued on next line*/
/*cont.*/",1);}ad Lmapped(){D c=am(aj,W).V;aa=P(c*av(),1);}ad shiny(){P c=am(aj,W);c.V*=1.+c.a*bt(Ref);aa=P(c.V*av(),1);}ad blacksky(){aa=P(0);}ad timhel(){D d=aJ(Pos-Cam.V);d.b=d.b*4.+2.;A z=aJ(d).rg*2.;B b=F(.2,1.,K(z-ac.r*A(.1,.2),A(5),.5,2.,6));z.g*=1.5;B s=F(.3,1.,K(z-ac.r*A(.1,.18),A(5),.6,2.,6));aa=P(D(b,0,0)+J(80,30,8)*s*s*2.,1);}ad lava(){A z=ah(W/8.,ac.r*.5,2.,.05);B b=K(z,A(7),.9,2.,4);D c=J(91,22,14)*(.2+1.6*b);c=I(c,J(144,44,0),C(.6,.2,K(z,A(3),.7,3.,4)));c=I(c,J(244,144,66)*b*2.,L(C(.55,.25,K(z,A(11),.5,2.,4))));aa=P(c*an(a6(av())),1);}ad lavaf(){lava();}ad Loading(){aa=am(aj,(.5+W*127.)/128.,2.5);aa.V*=.7+.3*Z(W,.5/fwidth(W));}ad UI(){aa=am(aj,W)*Clr;}";

// src/demo/data/shaders/vertex_shaders.glsl: 2702 => 1720 (63.7%)
const char g_vertex_shaders[] =
"#define c void\n"
"#define e vec4\n"
"#define f location\n"
"#define h gl_Position\n"
"uniform mat4 MVP;uniform e Time,Cam;layout(f=0)in e P;layout(f=1)in e T;layout(f=2)in vec3 N;layout(f=3)in e C;out vec3 Pos,Nor,Ref;out vec2 UV,LUV;out e Clr;c Generic(){h=MVP*P;Pos=P.rgb;Nor=N;UV=T.rg;LUV=T.ba;Ref=normalize(reflect((P-Cam).rgb,N));}c d(){h=P;UV=P.rg*.5+.5;}c UI(){h=e(2.*P.r-1.,1.-2.*P.g,1,1);UV=T.rg;Clr=C;}c cmet52(){d();}c dmnd2c(){d();}c dmnd2cow(){d();}c dmnd2cjp(){d();}c dmnd2pnt(){d();}c lpdmnd(){d();}c ptrshn(){d();}c mtlfw10(){d();}c mtlfw15(){d();}c mtlfw15ow(){d();}c mtlfb3(){d();}c mtlt12f(){d();}c mtlt6f(){d();}c mtlbk03(){d();}c gmtlbg6(){d();}c glrgbk3b(){d();}c gblks15(){d();}c gblks18c(){d();}c gklblki(){d();}c gtprst3(){d();}c gblks17f2(){d();}c gkarnclma2r(){d();}c skcpthrt(){d();}c gskull4(){d();}c gcntr2trn(){d();}c gmtlspsld(){d();}c gmtlsp4b(){d();}c gspbdrbb(){d();}c gkarntwr4a(){d();}c gkarntwrst(){d();}c giron01e(){d();}c giron01nt3(){d();}c gxstrtop4(){d();}c gwdclg1a(){d();}c gwdclg1bd(){d();}c gsltrfc(){d();}c bmtsprt(){d();}c cable(){d();}c brdr11b(){d();}c blt414k(){d();}c light5(){d();}c lt2(){d();}c gpntgmlt1k(){d();}c icon(){d();}c bwprtbnr(){d();}c q3bnr(){d();}c Loading(){d();}c Lmapped(){Generic();}c mtlfw15ow_m(){Generic();}c dmnd2cjp_m(){Generic();}c dmnd2pnt_m(){Generic();}c lpdmnd_m(){Generic();}c fixture(){Generic();}c beam(){Generic();}c flame(){Generic();}c q3bnr_m(){Generic();}c shiny(){Generic();}c gcntr2trn_m(){Generic();}c blacksky(){Generic();}c timhel(){Generic();}c lavaf(){Generic();}c i(float j,float k,float l){h+=k*MVP*e(N,0)*sin(6.28*(Time.r*l+dot(P.rgb/j,vec3(1))));}c bwprtbnr_m(){Generic();i(30.,3.,.2);i(100.,3.,.7);}c lava(){Generic();i(100.,3.,.1);}";
